!function(){var a=void 0;!function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}"undefined"!=typeof b&&(b.exports=d),d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],2:[function(b,c,d){!function(b,d,e){"use strict";"undefined"!=typeof c&&c.exports?c.exports=e():"function"==typeof a&&a.amd?a(e):d[b]=e()}("Fingerprint2",this,function(){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError("'this' is null or undefined");var d=Object(this),e=d.length>>>0;if(0===e)return-1;var f=+b||0;if(Math.abs(f)===1/0&&(f=0),f>=e)return-1;for(c=Math.max(f>=0?f:e-Math.abs(f),0);e>c;){if(c in d&&d[c]===a)return c;c++}return-1});var a=function(a){var b={swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",detectScreenOrientation:!0,sortPluginsFor:[/palemoon/i],userDefinedFonts:[]};this.options=this.extend(a,b),this.nativeForEach=Array.prototype.forEach,this.nativeMap=Array.prototype.map};return a.prototype={extend:function(a,b){if(null==a)return b;for(var c in a)null!=a[c]&&b[c]!==a[c]&&(b[c]=a[c]);return b},log:function(a){window.console&&void 0},get:function(a){var b=[];b=this.userAgentKey(b),b=this.languageKey(b),b=this.colorDepthKey(b),b=this.pixelRatioKey(b),b=this.screenResolutionKey(b),b=this.availableScreenResolutionKey(b),b=this.timezoneOffsetKey(b),b=this.sessionStorageKey(b),b=this.localStorageKey(b),b=this.indexedDbKey(b),b=this.addBehaviorKey(b),b=this.openDatabaseKey(b),b=this.cpuClassKey(b),b=this.platformKey(b),b=this.doNotTrackKey(b),b=this.pluginsKey(b),b=this.canvasKey(b),b=this.webglKey(b),b=this.adBlockKey(b),b=this.hasLiedLanguagesKey(b),b=this.hasLiedResolutionKey(b),b=this.hasLiedOsKey(b),b=this.hasLiedBrowserKey(b),b=this.touchSupportKey(b);var c=this;this.fontsKey(b,function(b){var d=[];c.each(b,function(a){var b=a.value;"undefined"!=typeof a.value.join&&(b=a.value.join(";")),d.push(b)});var e=c.x64hash128(d.join("~~~"),31);return a(e,b)})},userAgentKey:function(a){return this.options.excludeUserAgent||a.push({key:"user_agent",value:this.getUserAgent()}),a},getUserAgent:function(){return navigator.userAgent},languageKey:function(a){return this.options.excludeLanguage||a.push({key:"language",value:navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||""}),a},colorDepthKey:function(a){return this.options.excludeColorDepth||a.push({key:"color_depth",value:screen.colorDepth}),a},pixelRatioKey:function(a){return this.options.excludePixelRatio||a.push({key:"pixel_ratio",value:this.getPixelRatio()}),a},getPixelRatio:function(){return window.devicePixelRatio||""},screenResolutionKey:function(a){return this.options.excludeScreenResolution?a:this.getScreenResolution(a)},getScreenResolution:function(a){var b;return b=this.options.detectScreenOrientation&&screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height],"undefined"!=typeof b&&a.push({key:"resolution",value:b}),a},availableScreenResolutionKey:function(a){return this.options.excludeAvailableScreenResolution?a:this.getAvailableScreenResolution(a)},getAvailableScreenResolution:function(a){var b;return screen.availWidth&&screen.availHeight&&(b=this.options.detectScreenOrientation?screen.availHeight>screen.availWidth?[screen.availHeight,screen.availWidth]:[screen.availWidth,screen.availHeight]:[screen.availHeight,screen.availWidth]),"undefined"!=typeof b&&a.push({key:"available_resolution",value:b}),a},timezoneOffsetKey:function(a){return this.options.excludeTimezoneOffset||a.push({key:"timezone_offset",value:(new Date).getTimezoneOffset()}),a},sessionStorageKey:function(a){return!this.options.excludeSessionStorage&&this.hasSessionStorage()&&a.push({key:"session_storage",value:1}),a},localStorageKey:function(a){return!this.options.excludeSessionStorage&&this.hasLocalStorage()&&a.push({key:"local_storage",value:1}),a},indexedDbKey:function(a){return!this.options.excludeIndexedDB&&this.hasIndexedDB()&&a.push({key:"indexed_db",value:1}),a},addBehaviorKey:function(a){return document.body&&!this.options.excludeAddBehavior&&document.body.addBehavior&&a.push({key:"add_behavior",value:1}),a},openDatabaseKey:function(a){return!this.options.excludeOpenDatabase&&window.openDatabase&&a.push({key:"open_database",value:1}),a},cpuClassKey:function(a){return this.options.excludeCpuClass||a.push({key:"cpu_class",value:this.getNavigatorCpuClass()}),a},platformKey:function(a){return this.options.excludePlatform||a.push({key:"navigator_platform",value:this.getNavigatorPlatform()}),a},doNotTrackKey:function(a){return this.options.excludeDoNotTrack||a.push({key:"do_not_track",value:this.getDoNotTrack()}),a},canvasKey:function(a){return!this.options.excludeCanvas&&this.isCanvasSupported()&&a.push({key:"canvas",value:this.getCanvasFp()}),a},webglKey:function(a){return this.options.excludeWebGL?a:this.isWebGlSupported()?(a.push({key:"webgl",value:this.getWebglFp()}),a):a},adBlockKey:function(a){return this.options.excludeAdBlock||a.push({key:"adblock",value:this.getAdBlock()}),a},hasLiedLanguagesKey:function(a){return this.options.excludeHasLiedLanguages||a.push({key:"has_lied_languages",value:this.getHasLiedLanguages()}),a},hasLiedResolutionKey:function(a){return this.options.excludeHasLiedResolution||a.push({key:"has_lied_resolution",value:this.getHasLiedResolution()}),a},hasLiedOsKey:function(a){return this.options.excludeHasLiedOs||a.push({key:"has_lied_os",value:this.getHasLiedOs()}),a},hasLiedBrowserKey:function(a){return this.options.excludeHasLiedBrowser||a.push({key:"has_lied_browser",value:this.getHasLiedBrowser()}),a},fontsKey:function(a,b){return this.options.excludeJsFonts?this.flashFontsKey(a,b):this.jsFontsKey(a,b)},flashFontsKey:function(a,b){return this.options.excludeFlashFonts?b(a):this.hasSwfObjectLoaded()&&this.hasMinFlashInstalled()?"undefined"==typeof this.options.swfPath?b(a):void this.loadSwfAndDetectFonts(function(c){a.push({key:"swf_fonts",value:c.join(";")}),b(a)}):b(a)},jsFontsKey:function(a,b){var c=this;return setTimeout(function(){var d=["monospace","sans-serif","serif"],e=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"],f=["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"];c.options.extendedJsFonts&&(e=e.concat(f)),e=e.concat(c.options.userDefinedFonts);var g="mmmmmmmmmmlli",h="72px",i=document.getElementsByTagName("body")[0],j=document.createElement("div"),k=document.createElement("div"),l={},m={},n=function(){var a=document.createElement("span");return a.style.position="absolute",a.style.left="-9999px",a.style.fontSize=h,a.innerHTML=g,a},o=function(a,b){var c=n();return c.style.fontFamily="'"+a+"',"+b,c},p=function(){for(var a=[],b=0,c=d.length;c>b;b++){var e=n();e.style.fontFamily=d[b],j.appendChild(e),a.push(e)}return a},q=function(){for(var a={},b=0,c=e.length;c>b;b++){for(var f=[],g=0,h=d.length;h>g;g++){var i=o(e[b],d[g]);k.appendChild(i),f.push(i)}a[e[b]]=f}return a},r=function(a){for(var b=!1,c=0;c<d.length;c++)if(b=a[c].offsetWidth!==l[d[c]]||a[c].offsetHeight!==m[d[c]])return b;return b},s=p();i.appendChild(j);for(var t=0,u=d.length;u>t;t++)l[d[t]]=s[t].offsetWidth,m[d[t]]=s[t].offsetHeight;var v=q();i.appendChild(k);for(var w=[],x=0,y=e.length;y>x;x++)r(v[e[x]])&&w.push(e[x]);i.removeChild(k),i.removeChild(j),a.push({key:"js_fonts",value:w}),b(a)},1)},pluginsKey:function(a){return this.options.excludePlugins||(this.isIE()?this.options.excludeIEPlugins||a.push({key:"ie_plugins",value:this.getIEPlugins()}):a.push({key:"regular_plugins",value:this.getRegularPlugins()})),a},getRegularPlugins:function(){for(var a=[],b=0,c=navigator.plugins.length;c>b;b++)a.push(navigator.plugins[b]);return this.pluginsShouldBeSorted()&&(a=a.sort(function(a,b){return a.name>b.name?1:a.name<b.name?-1:0})),this.map(a,function(a){var b=this.map(a,function(a){return[a.type,a.suffixes].join("~")}).join(",");return[a.name,a.description,b].join("::")},this)},getIEPlugins:function(){var a=[];if(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window){var b=["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"];a=this.map(b,function(a){try{return new ActiveXObject(a),a}catch(b){return null}})}return navigator.plugins&&(a=a.concat(this.getRegularPlugins())),a},pluginsShouldBeSorted:function(){for(var a=!1,b=0,c=this.options.sortPluginsFor.length;c>b;b++){var d=this.options.sortPluginsFor[b];if(navigator.userAgent.match(d)){a=!0;break}}return a},touchSupportKey:function(a){return this.options.excludeTouchSupport||a.push({key:"touch_support",value:this.getTouchSupport()}),a},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(a){return!0}},hasLocalStorage:function(){try{return!!window.localStorage}catch(a){return!0}},hasIndexedDB:function(){return!!window.indexedDB},getNavigatorCpuClass:function(){return navigator.cpuClass?navigator.cpuClass:"unknown"},getNavigatorPlatform:function(){return navigator.platform?navigator.platform:"unknown"},getDoNotTrack:function(){return navigator.doNotTrack?navigator.doNotTrack:"unknown"},getTouchSupport:function(){var a=0,b=!1;"undefined"!=typeof navigator.maxTouchPoints?a=navigator.maxTouchPoints:"undefined"!=typeof navigator.msMaxTouchPoints&&(a=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),b=!0}catch(c){}var d="ontouchstart"in window;return[a,b,d]},getCanvasFp:function(){var a=[],b=document.createElement("canvas");b.width=2e3,b.height=200,b.style.display="inline";var c=b.getContext("2d");return c.rect(0,0,10,10),c.rect(2,2,6,6),a.push("canvas winding:"+(c.isPointInPath(5,5,"evenodd")===!1?"yes":"no")),c.textBaseline="alphabetic",c.fillStyle="#f60",c.fillRect(125,1,62,20),c.fillStyle="#069",this.options.dontUseFakeFontInCanvas?c.font="11pt Arial":c.font="11pt no-real-font-123",c.fillText("Cwm fjordbank glyphs vext quiz, 😃",2,15),c.fillStyle="rgba(102, 204, 0, 0.2)",c.font="18pt Arial",c.fillText("Cwm fjordbank glyphs vext quiz, 😃",4,45),c.globalCompositeOperation="multiply",c.fillStyle="rgb(255,0,255)",c.beginPath(),c.arc(50,50,50,0,2*Math.PI,!0),c.closePath(),c.fill(),c.fillStyle="rgb(0,255,255)",c.beginPath(),c.arc(100,50,50,0,2*Math.PI,!0),c.closePath(),c.fill(),c.fillStyle="rgb(255,255,0)",c.beginPath(),c.arc(75,100,50,0,2*Math.PI,!0),c.closePath(),c.fill(),c.fillStyle="rgb(255,0,255)",c.arc(75,75,75,0,2*Math.PI,!0),c.arc(75,75,25,0,2*Math.PI,!0),c.fill("evenodd"),a.push("canvas fp:"+b.toDataURL()),a.join("~")},getWebglFp:function(){var a,b=function(b){return a.clearColor(0,0,0,1),a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),"["+b[0]+", "+b[1]+"]"},c=function(a){var b,c=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic");return c?(b=a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT),0===b&&(b=2),b):null};if(a=this.getWebglCanvas(),!a)return null;var d=[],e="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}",f="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}",g=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,g);var h=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);a.bufferData(a.ARRAY_BUFFER,h,a.STATIC_DRAW),g.itemSize=3,g.numItems=3;var i=a.createProgram(),j=a.createShader(a.VERTEX_SHADER);a.shaderSource(j,e),a.compileShader(j);var k=a.createShader(a.FRAGMENT_SHADER);return a.shaderSource(k,f),a.compileShader(k),a.attachShader(i,j),a.attachShader(i,k),a.linkProgram(i),a.useProgram(i),i.vertexPosAttrib=a.getAttribLocation(i,"attrVertex"),i.offsetUniform=a.getUniformLocation(i,"uniformOffset"),a.enableVertexAttribArray(i.vertexPosArray),a.vertexAttribPointer(i.vertexPosAttrib,g.itemSize,a.FLOAT,!1,0,0),a.uniform2f(i.offsetUniform,1,1),a.drawArrays(a.TRIANGLE_STRIP,0,g.numItems),null!=a.canvas&&d.push(a.canvas.toDataURL()),d.push("extensions:"+a.getSupportedExtensions().join(";")),d.push("webgl aliased line width range:"+b(a.getParameter(a.ALIASED_LINE_WIDTH_RANGE))),d.push("webgl aliased point size range:"+b(a.getParameter(a.ALIASED_POINT_SIZE_RANGE))),d.push("webgl alpha bits:"+a.getParameter(a.ALPHA_BITS)),d.push("webgl antialiasing:"+(a.getContextAttributes().antialias?"yes":"no")),d.push("webgl blue bits:"+a.getParameter(a.BLUE_BITS)),d.push("webgl depth bits:"+a.getParameter(a.DEPTH_BITS)),d.push("webgl green bits:"+a.getParameter(a.GREEN_BITS)),d.push("webgl max anisotropy:"+c(a)),d.push("webgl max combined texture image units:"+a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),d.push("webgl max cube map texture size:"+a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE)),d.push("webgl max fragment uniform vectors:"+a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS)),d.push("webgl max render buffer size:"+a.getParameter(a.MAX_RENDERBUFFER_SIZE)),d.push("webgl max texture image units:"+a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)),d.push("webgl max texture size:"+a.getParameter(a.MAX_TEXTURE_SIZE)),d.push("webgl max varying vectors:"+a.getParameter(a.MAX_VARYING_VECTORS)),d.push("webgl max vertex attribs:"+a.getParameter(a.MAX_VERTEX_ATTRIBS)),d.push("webgl max vertex texture image units:"+a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),d.push("webgl max vertex uniform vectors:"+a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS)),d.push("webgl max viewport dims:"+b(a.getParameter(a.MAX_VIEWPORT_DIMS))),d.push("webgl red bits:"+a.getParameter(a.RED_BITS)),d.push("webgl renderer:"+a.getParameter(a.RENDERER)),d.push("webgl shading language version:"+a.getParameter(a.SHADING_LANGUAGE_VERSION)),d.push("webgl stencil bits:"+a.getParameter(a.STENCIL_BITS)),d.push("webgl vendor:"+a.getParameter(a.VENDOR)),d.push("webgl version:"+a.getParameter(a.VERSION)),a.getShaderPrecisionFormat?(d.push("webgl vertex shader high float precision:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision),d.push("webgl vertex shader high float precision rangeMin:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).rangeMin),d.push("webgl vertex shader high float precision rangeMax:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).rangeMax),d.push("webgl vertex shader medium float precision:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision),d.push("webgl vertex shader medium float precision rangeMin:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).rangeMin),d.push("webgl vertex shader medium float precision rangeMax:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).rangeMax),d.push("webgl vertex shader low float precision:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.LOW_FLOAT).precision),d.push("webgl vertex shader low float precision rangeMin:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.LOW_FLOAT).rangeMin),d.push("webgl vertex shader low float precision rangeMax:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.LOW_FLOAT).rangeMax),d.push("webgl fragment shader high float precision:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision),d.push("webgl fragment shader high float precision rangeMin:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).rangeMin),d.push("webgl fragment shader high float precision rangeMax:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).rangeMax),d.push("webgl fragment shader medium float precision:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision),d.push("webgl fragment shader medium float precision rangeMin:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).rangeMin),d.push("webgl fragment shader medium float precision rangeMax:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).rangeMax),d.push("webgl fragment shader low float precision:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.LOW_FLOAT).precision),d.push("webgl fragment shader low float precision rangeMin:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.LOW_FLOAT).rangeMin),d.push("webgl fragment shader low float precision rangeMax:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.LOW_FLOAT).rangeMax),d.push("webgl vertex shader high int precision:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_INT).precision),d.push("webgl vertex shader high int precision rangeMin:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_INT).rangeMin),d.push("webgl vertex shader high int precision rangeMax:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_INT).rangeMax),d.push("webgl vertex shader medium int precision:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_INT).precision),d.push("webgl vertex shader medium int precision rangeMin:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_INT).rangeMin),d.push("webgl vertex shader medium int precision rangeMax:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_INT).rangeMax),d.push("webgl vertex shader low int precision:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.LOW_INT).precision),d.push("webgl vertex shader low int precision rangeMin:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.LOW_INT).rangeMin),d.push("webgl vertex shader low int precision rangeMax:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.LOW_INT).rangeMax),d.push("webgl fragment shader high int precision:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_INT).precision),d.push("webgl fragment shader high int precision rangeMin:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_INT).rangeMin),d.push("webgl fragment shader high int precision rangeMax:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_INT).rangeMax),d.push("webgl fragment shader medium int precision:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_INT).precision),d.push("webgl fragment shader medium int precision rangeMin:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_INT).rangeMin),d.push("webgl fragment shader medium int precision rangeMax:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_INT).rangeMax),d.push("webgl fragment shader low int precision:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.LOW_INT).precision),d.push("webgl fragment shader low int precision rangeMin:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.LOW_INT).rangeMin),d.push("webgl fragment shader low int precision rangeMax:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.LOW_INT).rangeMax),d.join("~")):d.join("~")},getAdBlock:function(){var a=document.createElement("div");a.innerHTML="&nbsp;",a.className="adsbox";var b=!1;try{document.body.appendChild(a),b=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(a)}catch(c){b=!1}return b},getHasLiedLanguages:function(){if("undefined"!=typeof navigator.languages)try{var a=navigator.languages[0].substr(0,2);if(a!==navigator.language.substr(0,2))return!0}catch(b){return!0}return!1},getHasLiedResolution:function(){return screen.width<screen.availWidth||screen.height<screen.availHeight},getHasLiedOs:function(){var a,b=navigator.userAgent.toLowerCase(),c=navigator.oscpu,d=navigator.platform.toLowerCase();a=b.indexOf("windows phone")>=0?"Windows Phone":b.indexOf("win")>=0?"Windows":b.indexOf("android")>=0?"Android":b.indexOf("linux")>=0?"Linux":b.indexOf("iphone")>=0||b.indexOf("ipad")>=0?"iOS":b.indexOf("mac")>=0?"Mac":"Other";var e;if(e="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,e&&"Windows Phone"!==a&&"Android"!==a&&"iOS"!==a&&"Other"!==a)return!0;if("undefined"!=typeof c){if(c=c.toLowerCase(),c.indexOf("win")>=0&&"Windows"!==a&&"Windows Phone"!==a)return!0;if(c.indexOf("linux")>=0&&"Linux"!==a&&"Android"!==a)return!0;if(c.indexOf("mac")>=0&&"Mac"!==a&&"iOS"!==a)return!0;if(0===c.indexOf("win")&&0===c.indexOf("linux")&&c.indexOf("mac")>=0&&"other"!==a)return!0}return d.indexOf("win")>=0&&"Windows"!==a&&"Windows Phone"!==a||((d.indexOf("linux")>=0||d.indexOf("android")>=0||d.indexOf("pike")>=0)&&"Linux"!==a&&"Android"!==a||((d.indexOf("mac")>=0||d.indexOf("ipad")>=0||d.indexOf("ipod")>=0||d.indexOf("iphone")>=0)&&"Mac"!==a&&"iOS"!==a||(0===d.indexOf("win")&&0===d.indexOf("linux")&&d.indexOf("mac")>=0&&"other"!==a||"undefined"==typeof navigator.plugins&&"Windows"!==a&&"Windows Phone"!==a)))},getHasLiedBrowser:function(){var a,b=navigator.userAgent.toLowerCase(),c=navigator.productSub;if(a=b.indexOf("firefox")>=0?"Firefox":b.indexOf("opera")>=0||b.indexOf("opr")>=0?"Opera":b.indexOf("chrome")>=0?"Chrome":b.indexOf("safari")>=0?"Safari":b.indexOf("trident")>=0?"Internet Explorer":"Other",("Chrome"===a||"Safari"===a||"Opera"===a)&&"20030107"!==c)return!0;var d=eval.toString().length;if(37===d&&"Safari"!==a&&"Firefox"!==a&&"Other"!==a)return!0;if(39===d&&"Internet Explorer"!==a&&"Other"!==a)return!0;if(33===d&&"Chrome"!==a&&"Opera"!==a&&"Other"!==a)return!0;var e;try{throw"a"}catch(f){try{f.toSource(),e=!0}catch(g){e=!1}}return!(!e||"Firefox"===a||"Other"===a)},isCanvasSupported:function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))},isWebGlSupported:function(){if(!this.isCanvasSupported())return!1;var a,b=document.createElement("canvas");try{a=b.getContext&&(b.getContext("webgl")||b.getContext("experimental-webgl"))}catch(c){a=!1}return!!window.WebGLRenderingContext&&!!a},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},hasSwfObjectLoaded:function(){return"undefined"!=typeof window.swfobject},hasMinFlashInstalled:function(){return swfobject.hasFlashPlayerVersion("9.0.0")},addFlashDivNode:function(){var a=document.createElement("div");a.setAttribute("id",this.options.swfContainerId),document.body.appendChild(a)},loadSwfAndDetectFonts:function(a){var b="___fp_swf_loaded";window[b]=function(b){a(b)};var c=this.options.swfContainerId;this.addFlashDivNode();var d={onReady:b},e={allowScriptAccess:"always",menu:"false"};swfobject.embedSWF(this.options.swfPath,c,"1","1","9.0.0",!1,d,e,{})},getWebglCanvas:function(){var a=document.createElement("canvas"),b=null;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){}return b||(b=null),b},each:function(a,b,c){if(null!==a)if(this.nativeForEach&&a.forEach===this.nativeForEach)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d,a)==={})return}else for(var f in a)if(a.hasOwnProperty(f)&&b.call(c,a[f],f,a)==={})return},map:function(a,b,c){var d=[];return null==a?d:this.nativeMap&&a.map===this.nativeMap?a.map(b,c):(this.each(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},x64Add:function(a,b){a=[a[0]>>>16,65535&a[0],a[1]>>>16,65535&a[1]],b=[b[0]>>>16,65535&b[0],b[1]>>>16,65535&b[1]];var c=[0,0,0,0];return c[3]+=a[3]+b[3],c[2]+=c[3]>>>16,c[3]&=65535,c[2]+=a[2]+b[2],c[1]+=c[2]>>>16,c[2]&=65535,c[1]+=a[1]+b[1],c[0]+=c[1]>>>16,c[1]&=65535,c[0]+=a[0]+b[0],c[0]&=65535,[c[0]<<16|c[1],c[2]<<16|c[3]]},x64Multiply:function(a,b){a=[a[0]>>>16,65535&a[0],a[1]>>>16,65535&a[1]],
b=[b[0]>>>16,65535&b[0],b[1]>>>16,65535&b[1]];var c=[0,0,0,0];return c[3]+=a[3]*b[3],c[2]+=c[3]>>>16,c[3]&=65535,c[2]+=a[2]*b[3],c[1]+=c[2]>>>16,c[2]&=65535,c[2]+=a[3]*b[2],c[1]+=c[2]>>>16,c[2]&=65535,c[1]+=a[1]*b[3],c[0]+=c[1]>>>16,c[1]&=65535,c[1]+=a[2]*b[2],c[0]+=c[1]>>>16,c[1]&=65535,c[1]+=a[3]*b[1],c[0]+=c[1]>>>16,c[1]&=65535,c[0]+=a[0]*b[3]+a[1]*b[2]+a[2]*b[1]+a[3]*b[0],c[0]&=65535,[c[0]<<16|c[1],c[2]<<16|c[3]]},x64Rotl:function(a,b){return b%=64,32===b?[a[1],a[0]]:32>b?[a[0]<<b|a[1]>>>32-b,a[1]<<b|a[0]>>>32-b]:(b-=32,[a[1]<<b|a[0]>>>32-b,a[0]<<b|a[1]>>>32-b])},x64LeftShift:function(a,b){return b%=64,0===b?a:32>b?[a[0]<<b|a[1]>>>32-b,a[1]<<b]:[a[1]<<b-32,0]},x64Xor:function(a,b){return[a[0]^b[0],a[1]^b[1]]},x64Fmix:function(a){return a=this.x64Xor(a,[0,a[0]>>>1]),a=this.x64Multiply(a,[4283543511,3981806797]),a=this.x64Xor(a,[0,a[0]>>>1]),a=this.x64Multiply(a,[3301882366,444984403]),a=this.x64Xor(a,[0,a[0]>>>1])},x64hash128:function(a,b){a=a||"",b=b||0;for(var c=a.length%16,d=a.length-c,e=[0,b],f=[0,b],g=[0,0],h=[0,0],i=[2277735313,289559509],j=[1291169091,658871167],k=0;d>k;k+=16)g=[255&a.charCodeAt(k+4)|(255&a.charCodeAt(k+5))<<8|(255&a.charCodeAt(k+6))<<16|(255&a.charCodeAt(k+7))<<24,255&a.charCodeAt(k)|(255&a.charCodeAt(k+1))<<8|(255&a.charCodeAt(k+2))<<16|(255&a.charCodeAt(k+3))<<24],h=[255&a.charCodeAt(k+12)|(255&a.charCodeAt(k+13))<<8|(255&a.charCodeAt(k+14))<<16|(255&a.charCodeAt(k+15))<<24,255&a.charCodeAt(k+8)|(255&a.charCodeAt(k+9))<<8|(255&a.charCodeAt(k+10))<<16|(255&a.charCodeAt(k+11))<<24],g=this.x64Multiply(g,i),g=this.x64Rotl(g,31),g=this.x64Multiply(g,j),e=this.x64Xor(e,g),e=this.x64Rotl(e,27),e=this.x64Add(e,f),e=this.x64Add(this.x64Multiply(e,[0,5]),[0,1390208809]),h=this.x64Multiply(h,j),h=this.x64Rotl(h,33),h=this.x64Multiply(h,i),f=this.x64Xor(f,h),f=this.x64Rotl(f,31),f=this.x64Add(f,e),f=this.x64Add(this.x64Multiply(f,[0,5]),[0,944331445]);switch(g=[0,0],h=[0,0],c){case 15:h=this.x64Xor(h,this.x64LeftShift([0,a.charCodeAt(k+14)],48));case 14:h=this.x64Xor(h,this.x64LeftShift([0,a.charCodeAt(k+13)],40));case 13:h=this.x64Xor(h,this.x64LeftShift([0,a.charCodeAt(k+12)],32));case 12:h=this.x64Xor(h,this.x64LeftShift([0,a.charCodeAt(k+11)],24));case 11:h=this.x64Xor(h,this.x64LeftShift([0,a.charCodeAt(k+10)],16));case 10:h=this.x64Xor(h,this.x64LeftShift([0,a.charCodeAt(k+9)],8));case 9:h=this.x64Xor(h,[0,a.charCodeAt(k+8)]),h=this.x64Multiply(h,j),h=this.x64Rotl(h,33),h=this.x64Multiply(h,i),f=this.x64Xor(f,h);case 8:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+7)],56));case 7:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+6)],48));case 6:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+5)],40));case 5:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+4)],32));case 4:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+3)],24));case 3:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+2)],16));case 2:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+1)],8));case 1:g=this.x64Xor(g,[0,a.charCodeAt(k)]),g=this.x64Multiply(g,i),g=this.x64Rotl(g,31),g=this.x64Multiply(g,j),e=this.x64Xor(e,g)}return e=this.x64Xor(e,[0,a.length]),f=this.x64Xor(f,[0,a.length]),e=this.x64Add(e,f),f=this.x64Add(f,e),e=this.x64Fmix(e),f=this.x64Fmix(f),e=this.x64Add(e,f),f=this.x64Add(f,e),("00000000"+(e[0]>>>0).toString(16)).slice(-8)+("00000000"+(e[1]>>>0).toString(16)).slice(-8)+("00000000"+(f[0]>>>0).toString(16)).slice(-8)+("00000000"+(f[1]>>>0).toString(16)).slice(-8)}},a.VERSION="1.4.1",a})},{}],3:[function(a,b,c){function d(){}function e(a){if(!r(a))return a;var b=[];for(var c in a)f(b,c,a[c]);return b.join("&")}function f(a,b,c){if(null!=c)if(Array.isArray(c))c.forEach(function(c){f(a,b,c)});else if(r(c))for(var d in c)f(a,b+"["+d+"]",c[d]);else a.push(encodeURIComponent(b)+"="+encodeURIComponent(c));else null===c&&a.push(encodeURIComponent(b))}function g(a){for(var b,c,d={},e=a.split("&"),f=0,g=e.length;f<g;++f)b=e[f],c=b.indexOf("="),c==-1?d[decodeURIComponent(b)]="":d[decodeURIComponent(b.slice(0,c))]=decodeURIComponent(b.slice(c+1));return d}function h(a){var b,c,d,e,f=a.split(/\r?\n/),g={};f.pop();for(var h=0,i=f.length;h<i;++h)c=f[h],b=c.indexOf(":"),d=c.slice(0,b).toLowerCase(),e=t(c.slice(b+1)),g[d]=e;return g}function i(a){return/[\/+]json\b/.test(a)}function j(a){return a.split(/ *; */).shift()}function k(a){return a.split(/ *; */).reduce(function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();return d&&e&&(a[d]=e),a},{})}function l(a,b){b=b||{},this.req=a,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this._setStatusProperties(this.xhr.status),this.header=this.headers=h(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function m(a,b){var c=this;this._query=this._query||[],this.method=a,this.url=b,this.header={},this._header={},this.on("end",function(){var a=null,b=null;try{b=new l(c)}catch(d){return a=new Error("Parser is unable to parse the response"),a.parse=!0,a.original=d,a.rawResponse=c.xhr&&c.xhr.responseText?c.xhr.responseText:null,a.statusCode=c.xhr&&c.xhr.status?c.xhr.status:null,c.callback(a)}c.emit("response",b);var e;try{(b.status<200||b.status>=300)&&(e=new Error(b.statusText||"Unsuccessful HTTP response"),e.original=a,e.response=b,e.status=b.status)}catch(d){e=d}e?c.callback(e,b):c.callback(null,b)})}function n(a,b){var c=s("DELETE",a);return b&&c.end(b),c}var o;o="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var p=a("emitter"),q=a("./request-base"),r=a("./is-object"),s=b.exports=a("./request").bind(null,m);s.getXHR=function(){if(!(!o.XMLHttpRequest||o.location&&"file:"==o.location.protocol&&o.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}throw Error("Browser-only verison of superagent could not find XHR")};var t="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};s.serializeObject=e,s.parseString=g,s.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},s.serialize={"application/x-www-form-urlencoded":e,"application/json":JSON.stringify},s.parse={"application/x-www-form-urlencoded":g,"application/json":JSON.parse},l.prototype.get=function(a){return this.header[a.toLowerCase()]},l.prototype._setHeaderProperties=function(a){var b=this.header["content-type"]||"";this.type=j(b);var c=k(b);for(var d in c)this[d]=c[d]},l.prototype._parseBody=function(a){var b=s.parse[this.type];return!b&&i(this.type)&&(b=s.parse["application/json"]),b&&a&&(a.length||a instanceof Object)?b(a):null},l.prototype._setStatusProperties=function(a){1223===a&&(a=204);var b=a/100|0;this.status=this.statusCode=a,this.statusType=b,this.info=1==b,this.ok=2==b,this.clientError=4==b,this.serverError=5==b,this.error=(4==b||5==b)&&this.toError(),this.accepted=202==a,this.noContent=204==a,this.badRequest=400==a,this.unauthorized=401==a,this.notAcceptable=406==a,this.notFound=404==a,this.forbidden=403==a},l.prototype.toError=function(){var a=this.req,b=a.method,c=a.url,d="cannot "+b+" "+c+" ("+this.status+")",e=new Error(d);return e.status=this.status,e.method=b,e.url=c,e},s.Response=l,p(m.prototype);for(var u in q)m.prototype[u]=q[u];m.prototype.type=function(a){return this.set("Content-Type",s.types[a]||a),this},m.prototype.responseType=function(a){return this._responseType=a,this},m.prototype.accept=function(a){return this.set("Accept",s.types[a]||a),this},m.prototype.auth=function(a,b,c){switch(c||(c={type:"basic"}),c.type){case"basic":var d=btoa(a+":"+b);this.set("Authorization","Basic "+d);break;case"auto":this.username=a,this.password=b}return this},m.prototype.query=function(a){return"string"!=typeof a&&(a=e(a)),a&&this._query.push(a),this},m.prototype.attach=function(a,b,c){return this._getFormData().append(a,b,c||b.name),this},m.prototype._getFormData=function(){return this._formData||(this._formData=new o.FormData),this._formData},m.prototype.callback=function(a,b){var c=this._callback;this.clearTimeout(),c(a,b)},m.prototype.crossDomainError=function(){var a=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");a.crossDomain=!0,a.status=this.status,a.method=this.method,a.url=this.url,this.callback(a)},m.prototype._timeoutError=function(){var a=this._timeout,b=new Error("timeout of "+a+"ms exceeded");b.timeout=a,this.callback(b)},m.prototype._appendQueryString=function(){var a=this._query.join("&");a&&(this.url+=~this.url.indexOf("?")?"&"+a:"?"+a)},m.prototype.end=function(a){var b=this,c=this.xhr=s.getXHR(),e=this._timeout,f=this._formData||this._data;this._callback=a||d,c.onreadystatechange=function(){if(4==c.readyState){var a;try{a=c.status}catch(d){a=0}if(0==a){if(b.timedout)return b._timeoutError();if(b._aborted)return;return b.crossDomainError()}b.emit("end")}};var g=function(a,c){c.total>0&&(c.percent=c.loaded/c.total*100),c.direction=a,b.emit("progress",c)};if(this.hasListeners("progress"))try{c.onprogress=g.bind(null,"download"),c.upload&&(c.upload.onprogress=g.bind(null,"upload"))}catch(h){}if(e&&!this._timer&&(this._timer=setTimeout(function(){b.timedout=!0,b.abort()},e)),this._appendQueryString(),this.username&&this.password?c.open(this.method,this.url,!0,this.username,this.password):c.open(this.method,this.url,!0),this._withCredentials&&(c.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof f&&!this._isHost(f)){var j=this._header["content-type"],k=this._serializer||s.serialize[j?j.split(";")[0]:""];!k&&i(j)&&(k=s.serialize["application/json"]),k&&(f=k(f))}for(var l in this.header)null!=this.header[l]&&c.setRequestHeader(l,this.header[l]);return this._responseType&&(c.responseType=this._responseType),this.emit("request",this),c.send("undefined"!=typeof f?f:null),this},s.Request=m,s.get=function(a,b,c){var d=s("GET",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},s.head=function(a,b,c){var d=s("HEAD",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.options=function(a,b,c){var d=s("OPTIONS",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.del=n,s["delete"]=n,s.patch=function(a,b,c){var d=s("PATCH",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.post=function(a,b,c){var d=s("POST",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.put=function(a,b,c){var d=s("PUT",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d}},{"./is-object":4,"./request":6,"./request-base":5,emitter:1}],4:[function(a,b,c){function d(a){return null!==a&&"object"==typeof a}b.exports=d},{}],5:[function(a,b,c){var d=a("./is-object");c.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},c.parse=function(a){return this._parser=a,this},c.serialize=function(a){return this._serializer=a,this},c.timeout=function(a){return this._timeout=a,this},c.then=function(a,b){if(!this._fullfilledPromise){var c=this;this._fullfilledPromise=new Promise(function(a,b){c.end(function(c,d){c?b(c):a(d)})})}return this._fullfilledPromise.then(a,b)},c["catch"]=function(a){return this.then(void 0,a)},c.use=function(a){return a(this),this},c.get=function(a){return this._header[a.toLowerCase()]},c.getHeader=c.get,c.set=function(a,b){if(d(a)){for(var c in a)this.set(c,a[c]);return this}return this._header[a.toLowerCase()]=b,this.header[a]=b,this},c.unset=function(a){return delete this._header[a.toLowerCase()],delete this.header[a],this},c.field=function(a,b){if(null===a||void 0===a)throw new Error(".field(name, val) name can not be empty");if(d(a)){for(var c in a)this.field(c,a[c]);return this}if(null===b||void 0===b)throw new Error(".field(name, val) val can not be empty");return this._getFormData().append(a,b),this},c.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},c.withCredentials=function(){return this._withCredentials=!0,this},c.redirects=function(a){return this._maxRedirects=a,this},c.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},c._isHost=function(a){var b={}.toString.call(a);switch(b){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}},c.send=function(a){var b=d(a),c=this._header["content-type"];if(b&&d(this._data))for(var e in a)this._data[e]=a[e];else"string"==typeof a?(c||this.type("form"),c=this._header["content-type"],"application/x-www-form-urlencoded"==c?this._data=this._data?this._data+"&"+a:a:this._data=(this._data||"")+a):this._data=a;return!b||this._isHost(a)?this:(c||this.type("json"),this)}},{"./is-object":4}],6:[function(a,b,c){function d(a,b,c){return"function"==typeof c?new a("GET",b).end(c):2==arguments.length?new a("GET",b):new a(b,c)}b.exports=d},{}],7:[function(a,b,c){"use strict";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(a){if(null==this)throw new TypeError("'this' is null or not defined");var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var d=arguments[1],e=0;e<c;){var f=b[e];if(a.call(d,f,e,b))return f;e++}}})},{}],8:[function(a,b,c){"use strict";b.exports=function(a){function b(){try{return Boolean(window.sessionStorage.getItem("vl_bubble_notif"))}catch(a){return!1}}function c(){try{window.sessionStorage.setItem("vl_bubble_notif",!0)}catch(a){}}(location.href.indexOf("trendwatching")>-1||location.href.indexOf("athenscannabisexpo")>-1)&&a.addHook("boot",function(){a.config.previewMode||setTimeout(function(){a.get("ping",function(a,b){})},3e3)}),a.addHook("widgetLoad",function(b){function c(b){if(window.matchMedia("(max-width: 455px)").matches){var c,d=navigator.userAgent,e=d.indexOf("iPhone")!==-1||d.indexOf("iPod")!==-1;c=e?window.innerHeight-50:window.innerHeight,"rewardingWidget"===b?a.widgets.getByType("rewardingWidget").forEach(function(b){b.config.embed||(b.frame.style.width="100%",b.frame.style.height=c+"px",b.frame.style.left="0",b.frame.style.top="0",b.config.isMobile=!0,b.send("update_state",{isMobile:!0,hasReferrer:Boolean(a.referrer&&a.referrer.referralCode),origin:a.origin}),b.isMobile=!0)}):"ambassadorWidget"===b&&a.widgets.getByType("ambassadorWidget").forEach(function(b){b.frame.style.width="100%",b.frame.style.left="0",b.frame.style.bottom="0",b.frame.style.borderRadius="0px",b.config.isMobile=!0,b.send("update_state",{isMobile:!0,hasReferrer:Boolean(a.referrer&&a.referrer.referralCode),origin:a.origin})})}else"rewardingWidget"===b?a.widgets.getByType("rewardingWidget").forEach(function(b){if(!b.config.embed){if(b.frame.style.width="420px",b.frame.style.height="520px",b.frame.style.left="",b.frame.style.top="",b.config.isMobile=!1,b.config.position)switch(b.config.position){case"bottom-right":b.frame.style.bottom="90px",b.frame.style.right="20px";break;case"bottom-left":b.frame.style.bottom="90px",b.frame.style.left="20px";break;case"top-right":b.frame.style.top="90px",b.frame.style.right="20px";break;case"top-left":b.frame.style.top="90px",b.frame.style.left="20px";break;default:b.frame.style.cssText+=b.config.position}else b.frame.style.bottom="90px",b.frame.style.right="20px";b.send("update_state",{isMobile:!1,hasReferrer:Boolean(a.referrer&&a.referrer.referralCode),origin:a.origin})}}):"ambassadorWidget"===b&&a.widgets.getByType("ambassadorWidget").forEach(function(b){if(b.frame.style.width="341px",b.frame.style.borderRadius=a.widgetData.widgets&&a.widgetData.widgets.ambassadorWidget&&a.widgetData.widgets.ambassadorWidget.roundedCorners?"8px":"0px",a.widgetData.campaignInfo&&a.widgetData.campaignInfo.position||b.config.position)switch(a.widgetData.campaignInfo&&a.widgetData.campaignInfo.position||b.config.position){case"bottom-right":b.frame.style.left="",b.frame.style.bottom="20px",b.frame.style.right="20px";break;case"bottom-left":b.frame.style.right="",b.frame.style.bottom="20px",b.frame.style.left="20px";break;default:b.frame.style.cssText+=b.config.position}else b.frame.style.bottom="20px",b.frame.style.left="20px";b.frame.style.visibility="visible",b.config.isMobile=!1,b.send("update_state",{isMobile:!1,hasReferrer:Boolean(a.referrer&&a.referrer.referralCode),origin:a.origin})})}if(("rewardingWidget"===a.widgets.getById(b.widgetId).type||"ambassadorWidget"===a.widgets.getById(b.widgetId).type)&&!a.config.previewMode){var d=a.widgets.getByType("rewardingWidget").length>0,e=a.widgets.getByType("ambassadorWidget").length>0;if(a.widgets.getByType("rewardingWidget").length>0||a.widgets.getByType("ambassadorWidget").length>0){var f=window.matchMedia("(max-width: 455px)").matches;d&&c("rewardingWidget"),e&&c("ambassadorWidget"),window.addEventListener("resize",function(){var a=window.matchMedia("(max-width: 455px)").matches;f!==a&&(f=a,d&&c("rewardingWidget"),e&&c("ambassadorWidget"))},!0)}}}),a.addHook("widgetLoad",function(b){function c(){var b=a.widgetData.widgets.milestoneWidget.milestones.length;a.widgets.getByType("milestoneWidget").forEach(function(c){switch(b){case 3:window.matchMedia("(max-width: 390px)").matches||c.container.element.offsetWidth<=390?c.send("update_state",{isMobile:!0,origin:a.origin}):c.send("update_state",{isMobile:!1,origin:a.origin});break;case 4:window.matchMedia("(max-width: 490px)").matches||c.container.element.offsetWidth<=490?c.send("update_state",{isMobile:!0,origin:a.origin}):c.send("update_state",{isMobile:!1,origin:a.origin});break;case 5:window.matchMedia("(max-width: 590px)").matches||c.container.element.offsetWidth<=590?c.send("update_state",{isMobile:!0,origin:a.origin}):c.send("update_state",{isMobile:!1,origin:a.origin});break;case 6:window.matchMedia("(max-width: 690px)").matches||c.container.element.offsetWidth<=690?c.send("update_state",{isMobile:!0,origin:a.origin}):c.send("update_state",{isMobile:!1,origin:a.origin});break;case 7:window.matchMedia("(max-width: 790px)").matches||c.container.element.offsetWidth<=790?c.send("update_state",{isMobile:!0,origin:a.origin}):c.send("update_state",{isMobile:!1,origin:a.origin});break;case 8:window.matchMedia("(max-width: 890px)").matches||c.container.element.offsetWidth<=890?c.send("update_state",{isMobile:!0,origin:a.origin}):c.send("update_state",{isMobile:!1,origin:a.origin});break;default:c.send("update_state",{isMobile:!1,origin:a.origin})}})}"milestoneWidget"===a.widgets.getById(b.widgetId).type&&(a.config.previewMode||(a.widgets.getByType("milestoneWidget").length>0&&(c(),window.addEventListener("resize",function(){c()},!0)),a.addHook("stageChange",function(){c()})))}),a.addHook("widgetsLoad",function(){document.getElementById("intercom-container")&&(document.getElementById("intercom-container").style.zIndex-=1)});var d=!1;a.addHook("stageChange",function(b){if("postIdentify"===b.stage){if(d)return;d=!0,a.get("campaignInfo",function(b,c){if(!b){var d=c.campaignInfo.integrations;if(d&&(!d||0!==Object.keys(d).length)){if("network"===a.identifiedFrom&&a.user.isNew){var e={"First name":a.user.firstname||"","Last name":a.user.lastname||"",Email:a.user.email||""};d.segment&&d.segment.enabled&&window.analytics&&window.analytics.track&&"function"==typeof window.analytics.track&&(a.pendingIntegrations.segment=!0,window.analytics.track(d.segment.eventName,e,{},function(){a.pendingIntegrations.segment=!1})),d.googleAnalytics&&d.googleAnalytics.enabled&&window.ga&&"function"==typeof window.ga.getAll&&window.ga.getAll()&&window.ga.getAll().length>0&&(a.pendingIntegrations.googleAnalytics=!0,window.ga(window.ga.getAll()[0].get("name")+".send",{hitType:"event",eventCategory:d.googleAnalytics.category,eventAction:d.googleAnalytics.action,eventLabel:d.googleAnalytics.label,hitCallback:function(){a.pendingIntegrations.googleAnalytics=!1}})),d.facebookPixel&&d.facebookPixel.enabled&&(a.pendingIntegrations.facebookPixel=!0,window.fbq&&"function"==typeof window.fbq&&(window.fbq("trackCustom",d.facebookPixel.eventName),setTimeout(function(){a.pendingIntegrations.facebookPixel=!1},200))),d.mixpanel&&d.mixpanel.enabled&&window.mixpanel&&window.mixpanel.track&&"function"==typeof window.mixpanel.track&&(a.pendingIntegrations.mixPanel=!0,window.mixpanel.track(d.mixpanel.eventName,e,function(){a.pendingIntegrations.mixPanel=!1}))}if(d.customJS&&d.customJS.enabled){var f={"First name":a.user.firstname||"","Last name":a.user.lastname||"",Email:a.user.email||""};try{var g=new Function("isNewParticipant","participantData",d.customJS.code);a.pendingIntegrations.customJS=!0,g("network"===a.identifiedFrom&&a.user.isNew||!1,JSON.parse(JSON.stringify(f))),a.pendingIntegrations.customJs=!1}catch(b){a.pendingIntegrations.customJs=!1}}a.pendingIntegrations.postIdentify=!1}}})}});var e=!1;a.addHook("widgetsLoad",function(){function b(a,b){var c=b?b:window.location.href,d=new RegExp("[?&]"+a+"=([^&#]*)","i"),e=d.exec(c);return e?decodeURIComponent(e[1]):null}if(!a.config.previewMode&&a.widgetData.widgets&&(!a.widgetData.widgets||a.widgetData.widgets.rewardingWidget)){var c=a.widgets.getByType("rewardingWidget"),d=window.location.href;if(b("autoTrigger")&&!e)return void c.forEach(function(a){a.get("visible")||a.toggle(),e=!0});if(b("referralCode")&&!e&&a.widgetData.campaignInfo.inviteeRewardAvailable===!0)return void c.forEach(function(a){a.get("visible")||(a.toggle(),a.execute(function(a){document.getElementById(a).click()},["info"])),e=!0});if(Array.isArray(a.widgetData.coupons)&&a.widgetData.coupons.filter(function(a){return!a.redeemed}).length>0&&a.widgetData.campaignInfo.pages&&a.widgetData.campaignInfo.pages.checkout&&a.widgetData.campaignInfo.pages.checkout.enabled&&a.widgetData.campaignInfo.pages.checkout.url===d&&!e)return void c.forEach(function(a){a.get("visible")||(a.toggle(),a.execute(function(a){document.getElementById(a).click()},["coupons"])),e=!0});if(Array.isArray(a.widgetData.coupons)&&a.widgetData.coupons.filter(function(a){return!a.redeemed}).length>0&&"network"===a.identifiedFrom&&!e)return void c.forEach(function(a){a.get("visible")||(a.toggle(),a.execute(function(a){document.getElementById(a).click()},["coupons"])),e=!0});if("network"===a.identifiedFrom&&!e)return void c.forEach(function(a){a.get("visible")||(a.toggle(),a.execute(function(a){document.getElementById(a).click()},["sharing"])),e=!0});var f=(Date.now()-a.getSessionInfo().lastSessionEndedAt/36e5)%24;return Array.isArray(a.widgetData.coupons)&&a.widgetData.coupons.filter(function(a){return!a.redeemed}).length>0&&a.getSessionInfo().lastSessionEndedAt>0&&f>=24&&!e?void c.forEach(function(a){a.get("visible")||(a.toggle(),a.execute(function(a){document.getElementById(a).click()},["coupons"])),e=!0}):void 0}}),a.addHook("_frame_available",function(b){if(!a.config.previewMode){var c=a.widgets.getById(b.widgetId).type,d=a.widgets.getById(b.widgetId);if(a.widgetData&&a.widgetData.widgets&&a.widgetData.widgets[c]&&a.widgetData.widgets[c].customCSS&&a.widgetData.widgets[c].customCSS.enabled)d.applyStyle(a.widgetData.widgets[c].customCSS.url);else var e=setInterval(function(){a.widgetData&&a.widgetData.widgets&&a.widgetData.widgets[c]&&a.widgetData.widgets[c].customCSS&&a.widgetData.widgets[c].customCSS.enabled&&(d.applyStyle(a.widgetData.widgets[c].customCSS.url),clearInterval(e))},50)}});var f=!1;a.addHook("stageChange",function(d){"preIdentify"!==d.stage&&a.addHook("widgetUpdate",function(){function d(b){var c=setInterval(function(){a.widgets.getByType("rewardingWidgetTrigger").length>a.widgets.getByType("notificationBubble").length&&b&&b.frame&&parseInt(b.frame.style.height.replace("px",""))>0&&parseInt(b.frame.style.width.replace("px",""))>0&&(h(b),clearInterval(c))},100)}function e(a,b){var c=b.frame.style;switch(a.config.position){case"bottom-right":c.bottom=20+parseInt(a.frame.style.height.replace("px",""))-19+"px",c.right="13px";break;case"bottom-left":c.bottom=20+parseInt(a.frame.style.height.replace("px",""))-19+"px",c.left=20+parseInt(a.frame.style.width.replace("px",""))-19+"px";break;case"top-right":c.top="13px",c.right="13px";break;case"top-left":c.top="13px",c.left=20+parseInt(a.frame.style.width.replace("px",""))-19+"px";break;case null:c.bottom=20+parseInt(a.frame.style.height.replace("px",""))-19+"px",c.right="13px";break;default:var d=g(".trigger-position {"+a.config.position+"}")[0].style;d.bottom?d.right?(c.bottom=parseInt(d.bottom.replace("px",""))+parseInt(a.frame.style.height.replace("px",""))-19+"px",c.right=d.right):d.left&&(c.bottom=parseInt(d.bottom.replace("px",""))+parseInt(a.frame.style.height.replace("px",""))-19+"px",c.left=parseInt(d.left.replace("px",""))+parseInt(a.frame.style.width.replace("px",""))-19+"px"):d.top&&(d.right?(c.top=parseInt(d.top.replace("px",""))-7+"px",c.right=parseInt(d.right.replace("px",""))-7+"px"):d.left&&(c.top=parseInt(d.top.replace("px",""))-7+"px",c.left=parseInt(d.left.replace("px",""))+parseInt(a.frame.style.width.replace("px",""))-19+"px"))}}function g(a){var b=document.implementation.createHTMLDocument(""),c=document.createElement("style");return c.textContent=a,b.body.appendChild(c),c.sheet.cssRules}function h(b){a.widgets.create("notificationBubble",{container:"body"},function(c){e(b,c),a.addHook("_widget_height_change",function(a){a.widgetId===b.widgetId&&e(b,c)}),a.addHook("_widget_width_change",function(a){a.widgetId===b.widgetId&&e(b,c)}),c.show();var d=new Audio(a.origin+"static/notif-sound.mp3");setTimeout(function(){d.play()},300)})}if(!f&&!b()){var i=a.widgets.getByType("rewardingWidgetTrigger");!i||i&&0===i.length||a.widgetData.coupons&&0!==a.widgetData.coupons.filter(function(a){return!a.redeemed}).length&&(i.forEach(function(a){a&&a.frame&&parseInt(a.frame.style.height.replace("px",""))>0&&parseInt(a.frame.style.width.replace("px",""))>0?h(a):d(a)}),f=!0,c())}})})}},{}],9:[function(a,b,c){"use strict";function d(a){this.instance=a,this.resetHooks()}b.exports=function(a){d.prototype=e;var b=new d(a);return b.start(),b};var e={start:function(){var a=this;this.queue=[];var b=!1;setInterval(function(){if(!b){var c=a.queue.shift();if(c){var d=a._hooks[c.name].filter(function(a){return a.options.enabled}).length;d>0&&(b=!0),a._hooks[c.name].filter(function(a){return a.options.enabled}).forEach(function(e,f){var g=50*(f+1);setTimeout(function(){e.callback.call(a.instance,c.params,e),e.options.once&&e.disable(),f===d-1&&(b=!1)},g)})}}},50)},addHook:function(a,b){if(this._hooks[a]&&this._hooks[a].length>=0){var c={callback:b,options:{once:!1,enabled:!0,async:!1},once:function(){return this.options.once=!0,this},enable:function(){return this.options.enabled=!0,this},disable:function(){return this.options.enabled=!1,this},async:function(){return this.options.async=!0,this}};return this._hooks[a].push(c),c}},runHook:function(a,b){var c=this;b=b||{},"ready"===a||"boot"===a?this._hooks[a].filter(function(a){return a.options.enabled}).forEach(function(a,d){a.callback.call(c.instance,b,a),a.options.once&&a.disable()}):this.queue.push({name:a,params:b})},registerPendingHooks:function(){var a=this;!this.instance.pendingHooks||this.instance.pendingHooks&&0===this.instance.pendingHooks.length||(this.instance.pendingHooks.forEach(function(b){a.instance.addHook(b.name,b.cb)}),delete this.instance.pendingHooks)},resetHooks:function(){this._hooks={widgetUpdate:[],widgetLoad:[],widgetsLoad:[],stageChange:[],boot:[],widgetStageChange:[],ready:[],formSubmit:[],_frame_available:[],_frame_ready:[],_widget_height_change:[],_widget_width_change:[],_message_pass_reply:[],_pending_events_completed:[]}}}},{}],10:[function(a,b,c){"use strict";var d=a("superagent");b.exports={postEvent:function(a,b,c,e){d.post(a.apiUrl+"v2/events").set("Content-Type","application/json").set("X-UCID",a.publicToken).set("X-FP",a.fp).set("X-BC",JSON.stringify(a.bc)).send({params:{event:b,user:{firstname:c.firstname,lastname:c.lastname,email:c.email,referralCode:c.referralCode,appUserId:c.appUserId,facebookId:c.facebookId,createdAt:c.createdAt,extraData:c.extraData,timestamp:c.timestamp,signature:c.signature,distinctId:c.distinctId,consents:c.consents},referrer:{referralCode:a.referrer.referralCode,email:a.referrer.email,appUserId:a.referrer.appUserId},refSource:a.referrer.refSource},publicToken:a.publicToken}).end(function(a,b){a?e(a):e(null,b.body)})},getData:function(a,b,c){var e=[];e=b?b:a.pendingAccessors.filter(function(b){return b.runStage===a.runStage||"any"===b.runStage}).map(function(a){return a.name}),b||e.find(function(a){return"campaignInfo"===a})||e.push("campaignInfo");var f={};for(var g in a.config.identifier)a.config.identifier.hasOwnProperty(g)&&(f[g]=a.config.identifier[g]);d.get(a.apiUrl+"v2/data").query({publicToken:a.publicToken,params:{user:f,referrer:a.referrer||{},refSource:a.referrer&&a.referrer.refSource||"",accessors:e}}).set("Accept","application/json").set("X-UCID",a.publicToken).set("X-FP",a.fp).set("X-BC",JSON.stringify(a.bc)).end(function(d,f){d?c(d,{}):(b||(a.activeAccessors=e.map(function(b){return a.accessors[b]}),a.pendingAccessors=a.pendingAccessors.filter(function(b){return b.runStage!==a.runStage&&"any"!==b.runStage})),f.body&&f.body.userData&&a.user&&a.user.email&&(f.body.userData.email=a.user.email),c(null,f.body))})},socialAction:function(a,b,c,e){var f={};f.referralCode=a.user.referralCode,f.postType=b,f.postData=c,d.post(a.apiUrl+"v1/social_action").send(f).set("Accept","application/json").set("X-UCID",a.publicToken).set("X-FP",a.fp).set("X-BC",JSON.stringify(a.bc)).end(function(a,b){a?e&&"function"==typeof e&&e(a):e&&"function"==typeof e&&e()})},requestConsentEditLink:function(a,b,c,e){var f={};f.referralCode=a.user.referralCode,f.postType=b,f.postData=c,d.post(a.apiUrl+"v2/request_consent_edit_link").send(f).set("Accept","application/json").set("X-UCID",a.publicToken).set("X-FP",a.fp).set("X-BC",JSON.stringify(a.bc)).end(function(a,b){a?e&&"function"==typeof e&&e(a):e&&"function"==typeof e&&e()})},guestCheckoutSilentRefresh:function(a){d.get(location.href).end(function(b,c){b?a(c.body.error):a()})},trackerEvent:function(a,b,c){b.distinctId=a.distinctId,b.publicToken=a.publicToken,a.referrer&&a.referrer.referralCode&&(b.referrer=a.referrer.referralCode),a.trackerUrl.indexOf("release")>-1?c&&"function"==typeof c&&c(null):d.post(a.trackerUrl).set("Content-Type","application/json").send({event:b}).end(function(a,b){c&&"function"==typeof c&&(a?c(a):c(null,b.body))})}}},{superagent:3}],11:[function(a,b,c){"use strict";function d(a,b){this.namespace=a+"#",this.noPersist=b.noPersist}b.exports=function(a,b){d.prototype=f;var c=new d(a,b);return c};var e=3e4,f={get:function(a){if(!this.noPersist){var b;b=this.enabled()?localStorage.getItem(this.namespace+a):this.readCookie(this.namespace+a);try{b=JSON.parse(b)}catch(c){b=null}return b}},set:function(a,b){if(!this.noPersist)return this.enabled()?localStorage.setItem(this.namespace+a,JSON.stringify(b)):document.cookie=this.namespace+a+"="+JSON.stringify(b),this},enabled:function(){var a="test",b=window.sessionStorage;try{return b.setItem(a,"1"),b.removeItem(a),!0}catch(c){return!1}},clear:function(){this.noPersist||(this.enabled()?(localStorage.removeItem(this.namespace+"user"),localStorage.removeItem(this.namespace+"referrer"),localStorage.removeItem(this.namespace+"last_session_end"),localStorage.removeItem(this.namespace+"session_start"),localStorage.removeItem(this.namespace+"distinctId"),localStorage.removeItem(this.namespace+"accessorBox")):(this.deleteCookie(this.namespace,"user"),
this.deleteCookie(this.namespace,"referrer"),this.deleteCookie(this.namespace,"last_session_end"),this.deleteCookie(this.namespace,"session_start"),this.deleteCookie(this.namespace,"distinctId"),this.deleteCookie(this.namespace,"accessorBox")))},clearSingle:function(a){this.noPersist||(this.enabled()?localStorage.removeItem(this.namespace+a):this.deleteCookie(this.namespace,a))},readCookie:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return null},deleteCookie:function(a,b){document.cookie=a+b+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},removeGuestCheckoutCookie:function(a){document.cookie="vl_guest_checkout="+a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},saveGuestCheckoutCookie:function(a){document.cookie="vl_guest_checkout="+a+";Path=/;"},validCacheExists:function(a){var b=this.get("accessorBox");if(b){if(Date.now()-b.ts<e){var c=Object.keys(b.accessors),d=a.every(function(a){return c.indexOf(a)>-1});return!!d&&(this.accessors=b.accessors,!0)}return this.clearSingle("accessorBox"),!1}return!1},getCachedAccessors:function(){return this.accessors?this.accessors:this.validCacheExists()?this.accessors:null},saveAccessorsToCache:function(a){var b=this,c={ts:Date.now()};this.accessors=this.accessors||{},Object.keys(a).forEach(function(c){b.accessors[c]=a[c]}),c.accessors=this.accessors,this.set("accessorBox",c)}}},{}],12:[function(a,b,c){"use strict";function d(a){return a.campaignInfo&&a.campaignInfo.gdprJson&&a.campaignInfo.gdprJson&&(a.campaignInfo.gdprJson.consents=a.campaignInfo.gdprJson.consents.filter(function(a){return a.visible===!0}).sort(function(a,b){return a.order>b.order})),a}function e(a,b){var c=this;c.instance=a,c.services=i,c.helpers=j,k.setOrigin(b.origin),c.widgetKeep=k,h=l(c.instance.publicToken,c.instance.config),b&&b.previewMode&&this.exposeAction({action:"updateState",from:c,to:c.instance}),this.exposeAction({action:"getAll",from:k,to:c.instance.widgets}),this.exposeAction({action:"getById",from:k,to:c.instance.widgets}),this.exposeAction({action:"getByType",from:k,to:c.instance.widgets}),this.exposeAction({action:"getByContainer",from:k,to:c.instance.widgets}),this.exposeAction({action:"getWidgetsWithInactiveFrame",from:k,to:c.instance.widgets,alias:"__getWidgetsWithInactiveFrame"})}function f(a){var b=this;k.addAction(a.widgetId,"messagePass",function(c,d,e){arguments.length<2||(2===arguments.length&&(e=d,d={}),this.send("message_pass",{data:{message:c,options:d},origin:b.instance.origin}),b.instance.addHook("_message_pass_reply",function(b){e.call(a,b)}).once())}),k.addAction(a.widgetId,"show",function(a){var c=function(){var c,d=b.helpers.getQueryString("testMode");("true"==d||localStorage.getItem("vl_testMode")||b.instance.config.previewMode)&&(c=!0),b.instance.widgetData&&b.instance.widgetData.campaignInfo&&b.instance.widgetData.campaignInfo.isLive===!0&&(c=!0),b.instance.widgetData&&b.instance.widgetData.campaignInfo&&b.instance.widgetData.campaignInfo.campaignPageUrl&&window.location.href.indexOf(b.instance.widgetData.campaignInfo.campaignPageUrl)>-1&&(c=!1),window.parent&&window.parent.SHOW_VL_WIDGET===!0&&(c=!0),c&&(a&&a.withEmptyState&&!b.instance.config.previewMode?this.send("empty_state",{data:{},previewMode:!0,runStage:b.instance.runStage,hasReferrer:Boolean(b.instance.referrer&&b.instance.referrer.referralCode),origin:b.instance.origin}):this.send("init_frame",{data:b.instance.widgetData,previewMode:b.instance.config.previewMode,runStage:b.instance.runStage,hasReferrer:Boolean(b.instance.referrer&&b.instance.referrer.referralCode),origin:b.instance.origin,publicToken:b.instance.publicToken}))}.bind(this);window.parent&&window.parent.SHOW_VL_WIDGET===!1?this.ready&&this.toggle():this.ready?this.send("update_state",{data:b.instance.widgetData,runStage:b.instance.runStage,origin:b.instance.origin}):this.available?c():k.addAction(this.widgetId,"loadWhenReady",function(){c()})}),k.addAction(a.widgetId,"hide",function(){this.frame.style.display="none",this.container.element!==document.body&&(this.container.element.style.display="none"),this.update("visible",!1)}),k.addAction(a.widgetId,"resize",function(a,b){null!=a&&(this.frame.style.width=a),null!=b&&(this.frame.style.height=b)}),k.addAction(a.widgetId,"toggle",function(){var a;a="none"===this.frame.style.display?"visible":"hidden",this.messagePass("preToggle",function(){"none"===this.frame.style.display?(this.config.isMobile&&this.config.canFloat&&this.container.element===document.body&&(this.container.elementOptions=this.container.elementOptions||{},this.container.elementOptions.overflow=document.body.style.overflow,this.container.elementOptions.position=document.body.style.position,this.container.elementOptions.scrollTop=document.body.scrollTop,document.body.style.overflow="hidden",document.body.style.position="fixed"),this.frame.style.display="block",this.container.element!==document.body&&(this.container.element.style.display="block"),this.update("visible",!0),b.instance.config.previewMode||i.network.trackerEvent(b.instance,{type:"WidgetOpen"})):(this.config.isMobile&&this.config.canFloat&&this.container.element===document.body&&(document.body.style.overflow=this.container.elementOptions.overflow,document.body.style.position=this.container.elementOptions.position,document.body.scrollTop=this.container.elementOptions.scrollTop),this.frame.style.display="none",this.container.element!==document.body&&(this.container.element.style.display="block"),this.update("visible",!1)),this.pairs().forEach(function(c){c.send("pair_state_change",{data:{change:{visibility:a}},runStage:b.instance.runStage,hasReferrer:Boolean(b.instance.referrer&&b.instance.referrer.referralCode),origin:b.instance.origin})}),this.messagePass("postToggle",function(){window.dispatchEvent(new Event("resize"))})})}),k.addAction(a.widgetId,"applyStyle",function(a){a&&this.send("apply_style",{data:{style:a},runStage:b.instance.runStage,origin:b.instance.origin})}),k.addAction(a.widgetId,"execute",function(a,c){c=c||[],a&&"function"==typeof a&&this.send("execute",{data:{fn:a.toString(),args:JSON.parse(JSON.stringify(c))},runStage:b.instance.runStage,origin:b.instance.origin})})}function g(a){var b=0,c=0;a.services.hooks.addHook("_frame_available",function(c){b+=1;var d=a.widgetKeep.getById(c.widgetId);d.update("available",!0),b===a.widgetKeep.widgetCount(),d.hasAction("loadWhenReady")&&d.loadWhenReady()}),a.services.hooks.addHook("_frame_ready",function(b){c+=1;var d=a.widgetKeep.getById(b.widgetId);d.update("ready",!0),a.instance.onWidgetLoad&&"function"==typeof a.instance.onWidgetLoad&&a.instance.onWidgetLoad(d.widgetId),a.services.hooks.runHook("widgetLoad",{widgetId:d.widgetId}),c===a.widgetKeep.widgetCount(a.instance.runStage)&&(c=0,a.instance.onWidgetsLoad&&"function"==typeof a.instance.onWidgetsLoad&&a.instance.onWidgetsLoad(),a.services.hooks.runHook("widgetsLoad"))})}var h,i={},j={scan:a("./widgetManager/scan"),build:a("./widgetManager/build"),addToDom:a("./widgetManager/addToDom"),messageHandler:a("./widgetManager/messageHandler"),getQueryString:a("./widgetManager/getQueryString")},k=a("./widgetManager/widgetKeep")(),l=a("./vlStore");b.exports={init:function(a,b){e.prototype=m;var c=new e(a,b),d=j.messageHandler.bind(c);return c.setupListeners(d),c.createListenerDetacher(d),c.applyFrameStyle(),i.hooks=b.hooks,i.network=b.network,c}};var m={setupListeners:function(a){window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent&&window.attachEvent("message",a)},createListenerDetacher:function(a){this.removeListeners=function(){window.removeEventListener?window.removeEventListener("message",a):window.detachEvent&&window.detachEvent("message",a)}},registerWidgets:function(a){var b=this;return a.forEach(function(a){a.accessors.forEach(function(a){b.instance.pendingAccessors.find(function(b){return b.name===a})||b.instance.pendingAccessors.push(b.instance.accessors[a])}),k.register(a),f.call(b,a)}),k.getAll()},preload:function(){var a,b=this;a=j.scan(b.instance.publicToken);var c;c=j.build(b.instance.publicToken,a,{frameUrl:b.instance.frameUrl});var d=b.registerWidgets(c);g(b),d.forEach(function(a){j.addToDom(a,function(b){a.add("frame",b),i.hooks.runHook("_frame_available",{widgetId:a.get("widgetId")})},function(c){a&&a.get("available")===!1&&b.instance.reportError(b.instance.makeError("widget failed to load"))})})},applyFrameStyle:function(){var a=document.createElement("style");a.type="text/css",a.innerHTML=".vl-frame::-webkit-scrollbar{ display: none } @keyframes vl-bounceIn {0% {transform: scale(0.1);opacity: 0;}60% {transform: scale(1.2);opacity: 1;}100% {transform: scale(1);}}",document.getElementsByTagName("head")[0].appendChild(a)},updateState:function(a,b){var c=this;a&&(!a||a.match(c.instance.publicToken)&&k.getById(a)&&k.getById(a).get("frame"))&&k.getById(a).send("update_state",{data:b,runStage:c.instance.runStage,origin:c.instance.origin})},getData:function(a){var b=this;if(b.instance.config&&b.instance.config.previewMode)a();else{var c=b.instance.pendingAccessors.filter(function(a){return a.runStage===b.instance.runStage||"any"===a.runStage&&(!b.instance.widgetData||!b.instance.widgetData[a.name])});c.length>0?h.validCacheExists(c.map(function(a){return a.name}))?(b.instance.widgetData=b.instance.widgetData||{},Object.keys(h.getCachedAccessors()).forEach(function(a){b.instance.widgetData[a]=h.getCachedAccessors()[a]}),a(null,h.getCachedAccessors())):i.network.getData(b.instance,null,function(c,e){return c?a(c):(b.instance.widgetData=b.instance.widgetData||{},Object.keys(e).forEach(function(a){b.instance.widgetData[a]=e[a]}),e=d(e),h.saveAccessorsToCache(e),void a(null,e))}):a(null,b.instance.widgetData)}},getDataOnDemand:function(a,b){var c=this;h.validCacheExists(a)?b(null,h.getCachedAccessors()):i.network.getData(c.instance,a,function(a,c){return a?b(a):(h.saveAccessorsToCache(c),void b(null,c))})},exposeAction:function(a){a&&a.from&&a.action&&a.from[a.action]&&"function"==typeof a.from[a.action]&&(a.to[a.alias||a.action]=function(){return a.from[a.action].apply(a.from,Array.prototype.slice.call(arguments))})},createDataPoller:function(){var a=this,b=!1;return function(){if(!b&&!a.instance.config.previewMode&&a.instance.widgetData&&a.instance.widgetData.campaignInfo&&"dropboxV3"===a.instance.widgetData.campaignInfo.template){b=!0;var c=0,d=setInterval(function(){var e=a.instance.activeAccessors.filter(function(b){return b.runStage===a.instance.runStage||"any"===b.runStage}).map(function(a){return a.name});setTimeout(function(){a.getDataOnDemand(e,function(c,e){c||(e.coupons&&e.coupons.length!==a.instance.widgetData.coupons.length&&(clearInterval(d),b=!1),a.instance.widgetData=a.instance.widgetData||{},Object.keys(e).forEach(function(b){"referralUrls"!==b&&(a.instance.widgetData[b]=e[b])}),k.getAll().forEach(function(b){b.send("update_state",{data:a.instance.widgetData,runStage:a.instance.runStage,origin:a.instance.origin})}))})},1e3),c>=20&&(clearInterval(d),b=!1),c+=1},1e3)}}}}},{"./vlStore":11,"./widgetManager/addToDom":13,"./widgetManager/build":14,"./widgetManager/getQueryString":15,"./widgetManager/messageHandler":16,"./widgetManager/scan":17,"./widgetManager/widgetKeep":18}],13:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d=document.createElement("iframe");d.id=a.widgetId,d.src=a.path,d.style.cssText=a.styles,d.className+="vl-frame",d.style.display="none",a.config.canFloat&&!a.config.embed?document.body.appendChild(d):a.container.element.appendChild(d),d.onload=function(){b(d)},setTimeout(function(){c(d)},1e4)}},{}],14:[function(a,b,c){"use strict";function d(a,b){switch(b=b||{},a){case"sharingWidget":return["widgets","referralUrls","campaignInfo"];case"rewardStats":return["widgets","stats","referralCount","campaignInfo","coupons"];case"welcomeBar":return["widgets","referrerInfo","rewards","campaignInfo"];case"rewardingWidget":return["widgets","stats","referralCount","referralUrls","logs","userData","coupons","campaignInfo"];case"rewardingWidgetTrigger":return["campaignInfo","widgets"];case"embedForm":return["widgets","referralUrls","campaignInfo","userData","referralCount"];case"milestoneWidget":return["widgets","referralCount"];case"referralCountWidget":return["widgets","referralCount"];case"notificationBubble":return["coupons"];case"takeOverWidget":return["widgets","stats","referralCount","referralUrls","logs","userData","coupons","campaignInfo"];case"ambassadorWidget":return["widgets","referralUrls","campaignInfo","userData","referralCount"];default:return[]}}function e(a,b){switch(b=b||{},a){case"sharingWidget":return b.frameUrl+"sharingWidget/sharingWidget.min.html";case"rewardStats":return b.frameUrl+"rewardStats/rewardStats.min.html";case"welcomeBar":return b.frameUrl+"welcomeBar/welcomeBar.min.html";case"rewardingWidget":return b.frameUrl+"rewardingWidget/rewardingWidget.min.html";case"rewardingWidgetTrigger":return b.frameUrl+"rewardingWidgetTrigger/rewardingWidgetTrigger.min.html";case"embedForm":return b.frameUrl+"embedForm/embedForm.min.html";case"milestoneWidget":return b.frameUrl+"milestoneWidget/milestoneWidget.min.html";case"referralCountWidget":return b.frameUrl+"referralCountWidget/referralCountWidget.min.html";case"notificationBubble":return b.frameUrl+"notificationBubble/notificationBubble.min.html";case"takeOverWidget":return b.frameUrl+"takeOverWidget/takeOverWidget.min.html";case"ambassadorWidget":return b.frameUrl+"ambassadorWidget/ambassadorWidget.min.html";default:return""}}function f(a,b){switch(b=b||{},a){case"sharingWidget":return"postIdentify";case"rewardStats":return"postIdentify";case"welcomeBar":return"preIdentify";case"rewardingWidget":return"any";case"rewardingWidgetTrigger":return"any";case"embedForm":return"any";case"milestoneWidget":return"any";case"referralCountWidget":return"any";case"notificationBubble":return"postIdentify";case"takeOverWidget":return"postIdentify";case"ambassadorWidget":return"any";default:return"any"}}function g(a,b){switch(b=b||{},a){case"sharingWidget":return null;case"rewardStats":return null;case"welcomeBar":return"postIdentify";case"rewardingWidget":return null;case"rewardingWidgetTrigger":return null;case"embedForm":return null;case"milestoneWidget":return null;case"referralCountWidget":return null;case"notificationBubble":return null;case"takeOverWidget":return null;case"ambassadorWidget":return null;default:return null}}function h(a,b){b=b||{};var c="border:none; margin:0; padding:0; overflow:hidden; z-index:2147483647; border-radius:4px;";switch(a){case"sharingWidget":c+="left:0%;width:100%;height:100%;";break;case"rewardStats":c+="left:0%;width:100%;height:100%;";break;case"welcomeBar":c+="left:0%;width:100%;height:100%;";break;case"rewardingWidget":if(b.embed)c+="left:0%;width:100%;height:100%;";else{if(window.matchMedia("(max-width: 455px)").matches){var d=navigator.userAgent,e=d.indexOf("iPhone")!==-1||d.indexOf("iPod")!==-1,f=void 0;f=e?window.innerHeight-50:window.innerHeight,c+="position:fixed;width:100%;height:"+f+"px;",b.position="left:0;top:0",b.isMobile=!0}else c+="position:fixed;width:420px;height:520px;border-radius: 4px;";if(c+="opacity: 0",c+="-webkit-box-shadow: 0 4px 30px rgba(0, 0, 0, .12);box-shadow: 0 4px 30px rgba(0, 0, 0, .12);border-radius:4px;z-index:2147483647;",b.position)switch(b.position){case"bottom-right":c+="bottom:90px;right:20px;";break;case"bottom-left":c+="bottom:90px;left:20px;";break;case"top-right":c+="top:90px;right:20px;";break;case"top-left":c+="top:90px;left:20px;";break;default:c+=b.position}else c+="bottom:90px;right:20px;"}break;case"rewardingWidgetTrigger":if(b.embed)c+="left:0%;width:100%;height:100%;";else if(c+="position:fixed;box-shadow: 0 4px 30px rgba(0, 0, 0, .12); border-radius:50px; z-index:2147483645;",b.position)switch(b.position){case"bottom-right":c+="bottom:20px;right:20px;";break;case"bottom-left":c+="bottom:20px;left:20px;";break;case"top-right":c+="top:20px;right:20px;";break;case"top-left":c+="top:20px;left:20px;";break;default:c+=b.position}else c+="bottom:20px;right:20px;";break;case"embedForm":c+="left:0%;width:100%;height:100%;";break;case"milestoneWidget":c+="left:0%;width:100%;height:100%;";break;case"referralCountWidget":c+="left:0%;width:100%;height:100%;";break;case"notificationBubble":c+="width:22px;height:22px;position:fixed;box-shadow: 0 4px 30px rgba(0, 0, 0, .12); border-radius:50px; z-index:2147483646; animation: vl-bounceIn 0.6s; ";break;case"takeOverWidget":c+="position:fixed;width:100%;height:100%;border-radius: 4px;";break;case"ambassadorWidget":if(b.embed)c+="left:0%;width:100%;height:100%;";else if(c+="opacity: 0",c+="border-radius:5px;box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);z-index:2147483647;",window.matchMedia("(max-width: 455px)").matches)c+="position:fixed;width:100%;min-height:52px;border-radius:0;background: #fff;",c+="bottom:0px;left:0px;",b.isMobile=!0;else if(c+="position:fixed;width:341px;border-radius: 5px;background: #fff;",c+="bottom:20px;left:20px;",b.isMobile=!1,b.position)switch(b.position){case"bottom-right":c+="bottom:20px;right:20px;";break;case"bottom-left":c+="bottom:20px;left:20px;";break;default:c+=b.position}else c+="visibility: hidden;";break;default:return""}return c}function i(a,b){switch(b=b||{},a){case"rewardingWidget":b.canFloat=!0,b.staticHeight=!0,b.pair="rewardingWidgetTrigger";break;case"rewardingWidgetTrigger":b.canFloat=!0,b.pair="rewardingWidget";break;case"notificationBubble":b.canFloat=!0,b.staticHeight=!0,b.pair="rewardingWidgetTrigger";break;case"takeOverWidget":b.canFloat=!0,b.staticHeight=!0;break;case"ambassadorWidget":b.canFloat=!0,b.staticHeight=!1}return b}function j(a,b,c){return c&&c.widgetId?a+"_"+b+"_"+c.widgetId:a+"_"+b+"_"+Math.random().toString(36).substring(7)}b.exports=function(a,b,c){return b.map(function(b){return{type:b.type,available:!1,ready:!1,visible:!1,container:b,widgetId:j(a,b.type,b.options),path:e(b.type,c),accessors:d(b.type,b.options),runStage:f(b.type,b.options),hideStage:g(b.type,b.options),styles:h(b.type,b.options),config:i(b.type,b.options)}})}},{}],15:[function(a,b,c){"use strict";function d(){var a=!1,b={},c=null,d=location.search.substring(1);arguments.length>0&&arguments[0].length>1&&(a=arguments[0]);for(var e=/([^&=]+)=([^&]*)/g;c=e.exec(d);){if(a!==!1&&decodeURIComponent(c[1])===a)return decodeURIComponent(c[2]);a===!1&&(b[decodeURIComponent(c[1])]=decodeURIComponent(c[2]))}return a===!1?b:null}b.exports=d},{}],16:[function(a,b,c){"use strict";function d(){if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)){var a=document.querySelector('meta[name="viewport"]'),b=a.getAttribute("content");a&&(a.setAttribute("content","width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0"),a.setAttribute("content",b))}}b.exports=function(a){var b=this;if(a.data.widgetId&&(!a.data.widgetId||a.data.widgetId.match(b.instance.publicToken)))if("frame_ready"===a.data.type){var c=b.widgetKeep.getById(a.data.widgetId);c.config&&c.config.staticHeight||(c.frame.style.height=a.data.data.height+"px"),!a.data.data.keepHidden||c.container.element.dataset&&"true"===c.container.element.dataset.vlWidgetEmbed?setTimeout(function(){b.services.hooks.runHook("_frame_ready",{widgetId:a.data.widgetId}),c.frame.style.display="block",c.update("visible",!0)},300):b.services.hooks.runHook("_frame_ready",{widgetId:a.data.widgetId})}else if("action_dispatch"===a.data.type)switch(a.data.data.action){case"facebook":case"twitter":case"reddit":case"email":case"whatsapp":b.services.network.socialAction(b.instance,a.data.data.action,a.data.data.actionData);break;case"rewardingWidgetTrigger":b.widgetKeep.getById(a.data.widgetId).pairs().forEach(function(a){a.toggle()});break;case"rewardingWidgetTriggerFromInside":b.widgetKeep.getById(a.data.widgetId).toggle();break;case"togglePairWidgets":b.widgetKeep.getById(a.data.widgetId).pairs().forEach(function(a){a.toggle()});break;case"toggleWidget":b.widgetKeep.getById(a.data.widgetId).toggle();break;case"closePairWidgets":b.widgetKeep.getById(a.data.widgetId).pairs().forEach(function(a){a.hide()});break;case"resizeIframe":b.widgetKeep.getById(a.data.widgetId).resize(a.data.data.actionData.width,a.data.data.actionData.height);break;case"identify":b.instance.identify(a.data.data.actionData,function(a,b){d()});break;case"widgetStageChange":b.instance.config.previewMode&&b.services.hooks.runHook("widgetStageChange",{widgetId:a.data.widgetId,stage:a.data.data.actionData.stage});break;case"pageChange":b.instance.config.previewMode||(location.href=a.data.data.actionData.url);break;case"requestConsentEditLink":b.services.network.requestConsentEditLink(b.instance,a.data.data.action,a.data.data.actionData)}else"updated"===a.data.type?(b.instance.onWidgetUpdate&&"function"==typeof b.instance.onWidgetUpdate&&b.instance.onWidgetUpdate(a.data.widgetId,a.data.data.diff),b.services.hooks.runHook("widgetUpdate",{widgetId:a.data.widgetId,diff:a.data.data.diff})):"set_height"===a.data.type?b.widgetKeep.getById(a.data.widgetId)&&(b.widgetKeep.getById(a.data.widgetId).frame.style.height=a.data.data.height+"px",b.services.hooks.runHook("_widget_height_change",{widgetId:a.data.widgetId,height:a.data.data.height})):"set_width"===a.data.type?b.widgetKeep.getById(a.data.widgetId)&&(a.data.data.width>0&&(b.widgetKeep.getById(a.data.widgetId).frame.style.width=a.data.data.width+"px"),b.services.hooks.runHook("_widget_width_change",{widgetId:a.data.widgetId,width:a.data.data.width})):"message_pass_reply"===a.data.type?b.services.hooks.runHook("_message_pass_reply",a.data.data):"set_height_full"===a.data.type&&(b.widgetKeep.getById(a.data.widgetId).frame.style.height="100%",b.services.hooks.runHook("_widget_height_change",{widgetId:a.data.widgetId,height:"100%"}))}},{}],17:[function(a,b,c){"use strict";b.exports=function(a){var b,c=["sharingWidget","rewardStats","welcomeBar","rewardingWidget","rewardingWidgetTrigger","embedForm","milestoneWidget","referralCountWidget","notificationBubble","takeOverWidget","ambassadorWidget"],d=Array.prototype.slice.call(document.querySelectorAll("[data-vl-widget]")),e=[].filter.call(d,function(b){return b.getAttribute("data-vl-widget-for")===a}),f=[].filter.call(d,function(a){return!a.getAttribute("data-vl-widget-for")});return b=e.length>0?e:f,b=[].filter.call(b,function(a){return a.dataset&&c.indexOf(a.dataset.vlWidget)>-1}),[].map.call(b,function(a){return{type:a.getAttribute("data-vl-widget"),element:a,options:{position:a.getAttribute("data-vl-widget-position")||null,embed:"true"===a.getAttribute("data-vl-widget-embed"),autoTriggerOnReferral:"false"!==a.getAttribute("data-vl-widget-auto-trigger-on-referral"),widgetId:a.getAttribute("data-vl-widget-id")||null}}})}},{}],18:[function(a,b,c){"use strict";function d(){this.keep={}}b.exports=function(){return d.prototype=e,new d};var e={setOrigin:function(a){this.frameOrigin=a},getById:function(a){return this.keep[a]||null},getByType:function(a){var b=this,c=[];return Object.keys(this.keep).forEach(function(d){b.keep[d].type===a&&c.push(b.keep[d])}),c},getByContainer:function(a){var b=this,c=document.querySelector(a);if(c){var d=void 0;return Object.keys(this.keep).forEach(function(a){b.keep[a].container.element===c&&(d=b.keep[a])}),d}return null},getWidgetsWithInactiveFrame:function(){var a=this;return Object.keys(this.keep).filter(function(b){return a.keep[b].frame&&!document.getElementById(a.keep[b].widgetId)}).map(function(b){return a.keep[b]})},widgetCount:function(a){var b=this;return a?Object.keys(this.keep).filter(function(c){return b.keep[c].runStage===a||"any"===b.keep[c].runStage}).length:Object.keys(this.keep).length},widgetAvailableCount:function(){var a=this;return Object.keys(this.keep).filter(function(b){return a.keep[b].available}).length},widgetReadyCount:function(){var a=this;return Object.keys(this.keep).filter(function(b){return a.keep[b].ready}).length},getAll:function(){var a=this;return Object.keys(this.keep).map(function(b){return a.keep[b]})},register:function(a){var b=this;return this.keep[a.widgetId]=a,this.addAction(a.widgetId,"hasAction",function(c){return b.keep[a.widgetId]&&b.keep[a.widgetId][c]&&"function"==typeof b.keep[a.widgetId][c]}),this.addAction(a.widgetId,"update",function(c,d){b.keep[a.widgetId]&&null!==b.keep[a.widgetId][c]&&void 0!==b.keep[a.widgetId][c]&&(b.keep[a.widgetId][c]=d)}),this.addAction(a.widgetId,"add",function(c,d){b.keep[a.widgetId]&&(b.keep[a.widgetId][c]=d)}),this.addAction(a.widgetId,"get",function(c){return b.keep[a.widgetId]&&void 0!==b.keep[a.widgetId][c]?b.keep[a.widgetId][c]:null}),this.addAction(a.widgetId,"send",function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:{},previewMode:!1,runStage:"any",origin:this.frameOrigin};this.frame&&this.frame.contentWindow&&this.frame.contentWindow.postMessage({type:a,widgetId:this.widgetId,data:b.data||{},previewMode:b.previewMode,error:b.error||null,runStage:b.runStage,hasReferrer:b.hasReferrer||!1,isMobile:b.isMobile,publicToken:b.publicToken||"",frameOrigin:b.origin},b.origin)}),this.addAction(a.widgetId,"pairs",function(){return b.getByType(a.config.pair)}),this.keep[a.widgetId]},remove:function(a){if(this.keep[a]&&(!this.keep[a]||this.keep[a].frame))return this.keep[a].frame.parentNode===document.body?document.body.removeChild(this.keep[a].frame):this.keep[a].container.element.removeChild(this.keep[a].frame),delete this.keep[a],this},removeAll:function(){var a=this;Object.keys(this.keep).forEach(function(b){a.remove(b)})},addAction:function(a,b,c){b&&c&&"function"==typeof c&&(this.keep[a][b]=c.bind(this.keep[a]))}}},{}],19:[function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};window.VL.setup=function(b){function c(){var a=b;if(!a.publicToken&&!a.config.previewMode)return void b.reportError(b.makeError("publicToken not provided"));C=E(a.publicToken,a.config),F.preload(),(new A).get(function(c,d){b.bc=d.slice(1,14),b.fp=c,a.config.previewMode||window.location.href.indexOf("ambassador.producthunt")!==-1||window.location.href.indexOf("ambassadors.producthunt")!==-1||(b.referrer=m()),b.identify=p(),C.get("user")?b.afterLoad&&b.afterLoad.identify&&!b.identified&&!a.config.previewMode?b.identify(b.afterLoad.identify.userData,b.afterLoad.identify.cb):b.identify():b.afterLoad&&b.afterLoad.identify&&!b.identified&&!a.config.previewMode?b.identify(b.afterLoad.identify.userData,b.afterLoad.identify.cb):(h("autoDetect")||h("userCode"))&&b.identify({autoDetect:!0}),o(),b.onBoot&&"function"==typeof b.onBoot&&b.onBoot(),B.hooks.runHook("boot"),B.hooks.runHook("ready"),b.$=function(a){a.call(b)},(window.location.href.indexOf("ambassador.producthunt")>-1||window.location.href.indexOf("ambassadors.producthunt")>-1)&&(b.referrer=m()),b.config.previewMode||B.network.trackerEvent(b,{type:"View"}),b.config.autoLoadWidgets&&b.widgets.load()});var c=F.helpers.getQueryString("testMode");if(("true"===c||localStorage.getItem("vl_testMode"))&&!b.config.previewMode){localStorage.setItem("vl_testMode",!0);var d=document.createElement("iframe");d.id="exit-test-mode",d.src=b.frameUrl+"exitTestModeWidget/exitTestModeWidget.min.html",d.style.cssText="-webkit-box-shadow: 0 14px 30px rgba(0, 0, 0, .12);box-shadow: 0 14px 30px rgba(0, 0, 0, .12);z-index: 16777271; margin-top: -100px; width:315px; height: 243px; position: fixed; top:50%; left: 0; background: white; border:0;",document.body.appendChild(d)}window.addEventListener("message",function(a){var b=document.getElementById("exit-test-mode");if("close_test_iframe"===a.data.type){localStorage.removeItem("vl_testMode"),b.parentNode.removeChild(b);for(var c=document.getElementsByClassName("vl-frame"),d=c.length-1;d>=0;--d){var f=c[d];f.parentNode.removeChild(f)}var g=window.location.search;return g=e("testMode","",g),void(window.location=window.location.pathname+g)}"maximize_test_iframe"===a.data.type?b.style.width="300px":"minimize_test_iframe"===a.data.type&&(b.style.width="38px")})}function e(a,b,c){var d=new RegExp("([?;&])"+a+"[^&;]*[;&]?"),e=c.replace(d,"$1").replace(/&$/,"");return(e.length>2?e+"&":"?")+(b?a+"="+b:"")}function f(a){var b=!1;return a&&a!=={}&&(a.email||a.referralCode||a.appUserId||a.facebookId)&&(b=!0),b}function g(){return{firstname:h("firstname")||"",lastname:h("lastname")||"",email:h("email")||"",referralCode:h("userCode")||"",createdAt:h("createdAt")||"",appUserId:h("appUserId")||"",facebookId:h("facebookId")||""}}function h(a,b){var c=b?b:window.location.href,d=new RegExp("[?&]"+a+"=([^&#]*)","i"),e=d.exec(c);return e?decodeURIComponent(e[1]):null}function i(){return b.afterLoad&&b.afterLoad.identify&&!b.identified&&!b.config.previewMode||h("autoDetect")&&!b.identified||h("userCode")&&!b.identified}function j(){return b.pendingEvents.length>0}function k(){return Object.keys(b.pendingIntegrations).find(function(a){return b.pendingIntegrations[a]===!0})}function l(a,b){!k()||a>2?b():setTimeout(function(){a++,l(a,b)},600)}function m(){var a;if(G&&"function"==typeof G){var b=G();return b&&"object"===("undefined"==typeof b?"undefined":d(b))&&!b.refSource&&(b.refSource=h("refSource")||""),a=b,C.set("referrer",a),a}return C.get("referrer")?C.get("referrer"):(a={referralCode:h("referralCode")||"",refSource:h("refSource")||""},a.referralCode&&C.set("referrer",a),a)}function n(){return{widgets:{name:"widgets",runStage:"any"},referralUrls:{name:"referralUrls",runStage:"postIdentify"},stats:{name:"stats",runStage:"postIdentify"},referralCount:{name:"referralCount",runStage:"postIdentify"},inquiry:{name:"inquiry",runStage:"postIdentify"},referrerInfo:{name:"referrerInfo",runStage:"any"},rewards:{name:"rewards",runStage:"any"},campaignInfo:{name:"campaignInfo",runStage:"any"},logs:{name:"logs",runStage:"postIdentify"},userData:{name:"userData",runStage:"postIdentify"},coupons:{name:"coupons",runStage:"postIdentify"}}}function o(){function a(a){for(var b,c,d=[],e=0;e<a.length;e++){b=a.charCodeAt(e),c=[];do c.push(255&b),b>>=8;while(b);d=d.concat(c.reverse())}return d}function c(){var c=(new Date).getTime();return"undefined"!=typeof window.performance&&"function"==typeof window.performance.now&&(c+=window.performance.now()),c+=a(b.fp).reduce(function(a,b){return a+b}),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=(c+16*Math.random())%16|0;return c=Math.floor(c/16),("x"===a?b:3&b|8).toString(16)})}var d=C.get("distinctId");return d||(d=c(),C.set("distinctId",d)),b.distinctId=d,d}function p(){return function(a,c){if(C.get("user")){var e=C.get("user");b.user=e,b.config.identifier=e,b.identified=!0,b.identifiedFrom="cache",t(),b.pendingIntegrations.postIdentify=!0,u("postIdentify"),l(0,function(){c&&"function"==typeof c&&(f(e)?setTimeout(function(){c(null,e)}):setTimeout(function(){c(b.makeError("Invalid user identifier"),{})}))})}else{if(a&&"object"===("undefined"==typeof a?"undefined":d(a))&&a.autoDetect&&(a=g(),0===Object.keys(a).filter(function(b){return a[b]}).length))return;a.distinctId=C.get("distinctId");var h=void 0;if(h=a.trackAction?"action":"registration",I&&"function"==typeof I)try{var i=I();i&&"object"===("undefined"==typeof i?"undefined":d(i))&&Object.keys(i).forEach(function(b){a[b]=i[b]})}catch(j){}z.postEvent(b,h,a,function(d,e){b.identified=!0,b.identifiedFrom="network",t(),a.isNew=e.isNew,d?c&&"function"==typeof c&&c(d):(a.referralCode=e.referralCode,a.cpk=e.page||!1,b.user=a,C.set("user",a),b.config.identifier=a,b.pendingIntegrations.postIdentify=!0,a.trackFormEvent&&q()?u("postIdentify",{updateWidgets:!1}):u("postIdentify"),l(0,function(){a.guestCheckout&&s(a.email),c&&"function"==typeof c&&c(null,e),B.hooks.runHook("formSubmit",{email:a.email,referralCode:a.referralCode,isNew:e.isNew}),a.trackFormEvent&&q()&&r(e.referralCode);
}))})}}}function q(){return b.widgetData.widgets&&b.widgetData.widgets.embedForm&&"url"===b.widgetData.widgets.embedForm.participation.button.noReferrer.action}function r(a){var c=window.location.protocol+"//"+window.location.host+window.location.pathname;"url"===b.widgetData.widgets.embedForm.participation.button.noReferrer.action&&(b.widgetData.widgets.embedForm.participation.button.noReferrer.url.indexOf("?")>-1?b.widgetData.widgets.embedForm.participation.button.noReferrer.url!==c+window.location.search&&(window.location.href=b.widgetData.widgets.embedForm.participation.button.noReferrer.url+"&autoDetect=1&userCode="+a):b.widgetData.widgets.embedForm.participation.button.noReferrer.url!==c&&(window.location.href=b.widgetData.widgets.embedForm.participation.button.noReferrer.url+"?autoDetect=1&userCode="+a))}function s(a){window.vl_ajax&&window.vl_ajax.url&&window.jQuery?window.jQuery.post(window.vl_ajax.url,{email:a,action:"vl_guest_checkout"},function(c){b.get("coupons",function(c,d){c||(b.widgetData.coupons=d.coupons,C.removeGuestCheckoutCookie(a),b.widgets.getByType("rewardingWidget").forEach(function(a){F.updateState(a.widgetId,{coupons:d.coupons}),a.get("visible")||a.toggle(),d.coupons&&d.coupons.length>0?a.execute(function(a){this.goToTab("coupons")}):a.execute(function(a){this.goToTab("sharing")})}))})}):(C.saveGuestCheckoutCookie(a),z.guestCheckoutSilentRefresh(function(c,d){c||b.get("coupons",function(c,d){c||(b.widgetData.coupons=d.coupons,C.removeGuestCheckoutCookie(a),b.widgets.getByType("rewardingWidget").forEach(function(a){F.updateState(a.widgetId,{coupons:d.coupons}),a.get("visible")||a.toggle(),d.coupons&&d.coupons.length>0?a.execute(function(a){this.goToTab("coupons")}):a.execute(function(a){this.goToTab("sharing")})}))})}))}function t(){C.set("last_session_end",C.get("session_start")||0),C.set("session_start",Date.now())}function u(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{updateWidgets:!0};b.runStage=a,b.onStageChange&&"function"==typeof b.onStageChange&&b.onStageChange(b.runStage),B.hooks.runHook("stageChange",{stage:b.runStage}),"postIdentify"===a&&w(),c&&c.updateWidgets===!0&&(F.widgetKeep.getAll().filter(function(a){return a.ready&&a.hideStage===b.runStage}).forEach(function(a){a.hide()}),b.config.autoLoadWidgets&&b.widgets.load())}function v(){F.widgetKeep.removeAll(),F.removeListeners(),B.hooks.resetHooks();var a=F.helpers.messageHandler.bind(F);F.setupListeners(a),F.createListenerDetacher(a),b.widgets.loading=!1}function w(){b.committedEvents=[];var a=!1;if(b.track=function(c,d){if(a)return void setTimeout(function(){b.track(c,d)},100);if(a=!0,D.indexOf(c)===-1){x(c,{commit:!1}),a=!1;var e=b.makeError("Invalid event "+c);return b.reportError(e),d&&"function"==typeof d?d(e):e}return b.committedEvents.indexOf(c)>-1?(a=!1,x(c,{commit:!1})):void z.postEvent(b,c,b.user,function(b,e){b?d&&"function"==typeof d&&d(b,{}):d&&"function"==typeof d&&d(null,e),x(c,{commit:!0}),a=!1})},b.pendingEvents&&b.pendingEvents.length>0){var c=b.pendingEvents.map(function(a){return a});c.forEach(function(a){b.track(a.event,a.cb)})}}function x(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{commit:!1},d=[],e=b.pendingEvents.length>0;b.pendingEvents.forEach(function(b,c){b.event===a&&d.push(c)}),d.forEach(function(a){b.pendingEvents.splice(a,1)}),c&&c.commit===!0&&b.committedEvents.push(a),e&&0===b.pendingEvents.length&&B.hooks.runHook("_pending_events_completed")}a("../polyfills");var y=a("./libs/widgetManager"),z=a("./libs/network"),A=a("../node_modules/fingerprintjs2/dist/fingerprint2.min.js"),B={network:a("./libs/network"),hooks:a("./libs/hooks")(b)};b.frameUrl="https://app.viral-loops.com/client/",b.apiUrl="https://app.viral-loops.com/api/",b.origin="https://app.viral-loops.com/",b.trackerUrl="https://track.viral-loops.com/tr/",b.widgets=b.widgets||{},b.accessors=n(),b.activeAccessors=b.activeAccessors||[],b.pendingAccessors=b.pendingAccessors||[],b.pendingEvents=b.pendingEvents||[],b.pendingIntegrations=b.pendingIntegrations||{},b.paths=b.paths||[],b.widgetData=b.widgetData||{},b.runStage="preIdentify";var C,D=["conversion","action","order"],E=a("./libs/vlStore"),F=y.init(b,{previewMode:b.config.previewMode,network:B.network,hooks:B.hooks,origin:"https://app.viral-loops.com/"});F.exposeAction({action:"addHook",from:B.hooks,to:b}),B.hooks.registerPendingHooks(),a("./libs/behaviours")(b);var G,H=!1;b.setReferrer=function(a){G=a};var I;b.enrichUser=function(a){I=a},b.getSessionInfo=function(){var a=C.get("session_start"),b=C.get("last_session_end");return a&&b?{lastSessionEndedAt:parseInt(b),sessionStartedAt:parseInt(a)}:{lastSessionEndedAt:0,sessionStartedAt:Date.now()}},b.onWidgetUpdate=b.onWidgetUpdate||function(a,b){},b.onWidgetLoad=b.onWidgetLoad||function(a){},b.onWidgetsLoad=b.onWidgetsLoad||function(a){},b.onStageChange=b.onStageChange||function(a){},b.onBoot=b.onBoot||function(){},b.get=function(a,c){if(a&&"string"==typeof a)F.getDataOnDemand([a],function(a,b){if(c&&"function"==typeof c)return c(a,b)});else if(a&&a.length)F.getDataOnDemand(a,function(a,b){if(c&&"function"==typeof c)return c(a,b)});else{var d=b.makeError("Invalid value "+a);if(b.reportError(d),c&&"function"==typeof c)return c(d)}};var J=(F.createDataPoller(),!1);return b.widgets.load=function(){if(i()||j())i()?b.addHook("stageChange",function(a){"postIdentify"===a.stage&&b.widgets.load()}).async():j()&&b.addHook("_pending_events_completed",function(a){b.widgets.load()}).async();else{if(b.widgets.loading&&!H)return;J||(b.widgets.loading=!0,b.addHook("widgetsLoad",function(){b.widgets.loading=!1}),b.addHook("widgetUpdate",function(){b.widgets.loading=!1}),J=!0),0!==F.widgetKeep.widgetCount()||H?F.widgetKeep.getWidgetsWithInactiveFrame().length>0&&(F.widgetKeep.removeAll(),b.widgets.loading=!1,b.widgets.load()):F.preload(),F.getData(function(a,c){F.widgetKeep.getAll().filter(function(a){return a.runStage===b.runStage||"any"===a.runStage||b.config.previewMode}).forEach(function(b){b.show({withEmptyState:Boolean(a)})})})}},b.widgets.reload=function(){b.widgets.loading?b.addHook("widgetsLoad",function(){b.widgets.reload()}):(v(),b.widgets.load())},b.logout=function(a){this.user={},this.referrer={},this.config.identifier={},C.clear(),this.runStage="preIdentify",this.committedEvents=[],this.pendingEvents=[],this.pendingIntegrations={},this.activeAccessors=[],this.pendingAccessors=[],this.widgetData={},this.identified=!1,a&&a.reloadWidgets?b.widgets.reload():v(),a&&a.callback&&"function"==typeof a.callback&&a.callback()},b.widgets.create=function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments[2];if(["sharingWidget","rewardStats","welcomeBar","rewardingWidget","rewardingWidgetTrigger","embedForm","notificationBubble","takeOverWidget","milestoneWidget","referralCountWidget","ambassadorWidget"].indexOf(a)===-1)return b.reportError(b.makeError("Invalid widget: "+a));if(!document.querySelector(c.container))return b.reportError(b.makeError("Invalid widget container: "+c.container));H=!0;var e={type:a,element:document.querySelector(c.container),options:{position:c.position||null,embed:c.embed||!1,widgetId:c.widgetId||null}},f=F.helpers.build(b.publicToken,[e],{frameUrl:b.frameUrl})[0];F.registerWidgets([f]);var g=F.widgetKeep.getById(f.widgetId);F.helpers.addToDom(f,function(a){g.add("frame",a),B.hooks.runHook("_frame_available",{widgetId:g.get("widgetId")}),d&&"function"==typeof d&&d(g)},function(a){g&&g.get("available")===!1&&b.reportError(b.makeError("widget failed to load"))});var h=document.createElement("div");h.dataset.vlWidget=a,h.dataset.vlWidgetPosition=e.options.position,h.dataset.vlWidgetEmbed=e.options.embed,e.element.appendChild(h)},b.makeError=function(a){var b=new Error;return b.message=a,b},b.reportError=function(a){throw a},c(),b}},{"../node_modules/fingerprintjs2/dist/fingerprint2.min.js":2,"../polyfills":7,"./libs/behaviours":8,"./libs/hooks":9,"./libs/network":10,"./libs/vlStore":11,"./libs/widgetManager":12}]},{},[19])}();